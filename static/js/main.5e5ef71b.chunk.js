(this["webpackJsonptetris-words"]=this["webpackJsonptetris-words"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){e.exports={main:"GamePage_main__17VmN",progressContainer:"GamePage_progressContainer__3SUd1",backButtonContainer:"GamePage_backButtonContainer__1TsCh",scoreCounterContainer:"GamePage_scoreCounterContainer__3xbxZ",scoreCoinWrap:"GamePage_scoreCoinWrap__38NBF",fieldContainer:"GamePage_fieldContainer__GK9s9",tapeSlotsWrap:"GamePage_tapeSlotsWrap__1EnLm",tapeSlot:"GamePage_tapeSlot__3Uhmr",tapeSlot_position_1:"GamePage_tapeSlot_position_1__2G08b",tapeSlot_position_2:"GamePage_tapeSlot_position_2__20rZ1",tapeSlot_position_3:"GamePage_tapeSlot_position_3__PqwEF",tapeSlot_position_4:"GamePage_tapeSlot_position_4__1A40A",tapeSlot_position_5:"GamePage_tapeSlot_position_5__3Kxfe",timer:"GamePage_timer__1Mv79"}},function(e,t,n){e.exports={popupContent:"ContentResultGame_popupContent__2SF-Y",textWrap:"ContentResultGame_textWrap__cxkxg",container:"ContentResultGame_container__3F-9C",container_result:"ContentResultGame_container_result__2ZRfG",container_table:"ContentResultGame_container_table__3Z_kz",tabs:"ContentResultGame_tabs__6Xckc",tab:"ContentResultGame_tab__vYC6K",tabActive:"ContentResultGame_tabActive__3dXRK",buttonsWrap:"ContentResultGame_buttonsWrap__P4ipi",btn:"ContentResultGame_btn__1TF4N"}},,,,,,function(e,t,n){e.exports={main:"Cube_main__hJP24",main_disabled:"Cube_main_disabled__2nnek",main_hoverable:"Cube_main_hoverable__3pwki",main_hovered:"Cube_main_hovered__16O4D",main_selected:"Cube_main_selected__16Uy4",scaleWrap:"Cube_scaleWrap__2GxKq",background:"Cube_background__1XBLx",content:"Cube_content__29hV2"}},function(e,t,n){e.exports={wrap:"PopupStartGame_wrap__2eM-c",overlay:"PopupStartGame_overlay__10sT_",popup:"PopupStartGame_popup__MGt-c",popup_startGame:"PopupStartGame_popup_startGame__1BnmD",buttonsWrap:"PopupStartGame_buttonsWrap__1xTYJ",btn:"PopupStartGame_btn__FpJjF"}},function(e,t,n){e.exports={popupContent:"ContentContinueGame_popupContent__3O75R",textWrap:"ContentContinueGame_textWrap__1fquI",text:"ContentContinueGame_text__fPXkj",buttonsWrap:"ContentContinueGame_buttonsWrap__oBGXJ",btn:"ContentContinueGame_btn__2gQK2"}},,,,function(e,t,n){e.exports={wrap:"PopupContinueGame_wrap__nQinV",overlay:"PopupContinueGame_overlay__1967l",popup:"PopupContinueGame_popup__3VchC",popup_continueGame:"PopupContinueGame_popup_continueGame__2y7eJ",popup_resultGame:"PopupContinueGame_popup_resultGame__3hSnL"}},function(e,t,n){e.exports={wrap:"PopupResultGame_wrap__1z203",overlay:"PopupResultGame_overlay__1gYry",popup:"PopupResultGame_popup__11-Js",popup_continueGame:"PopupResultGame_popup_continueGame__2_bdG",popup_resultGame:"PopupResultGame_popup_resultGame__1vmkA"}},function(e,t,n){e.exports={titleResult:"TableResult_titleResult__1Xeqm",titleWords:"TableResult_titleWords__3dDIz",words:"TableResult_words__bFocX",scores:"TableResult_scores__Vo-qj"}},,,,function(e,t,n){e.exports={field:"Field_field__3_I7N",field_disabled:"Field_field_disabled__TjW7U",cells:"Field_cells__18mqT"}},function(e,t,n){e.exports={table:"TableLetterScore_table__2T9aQ",letter:"TableLetterScore_letter__1Y9Xd",letterScore:"TableLetterScore_letterScore__1CAWA"}},,function(e,t,n){e.exports={cell:"Cell_cell__1-e6R",cell_hovered:"Cell_cell_hovered__unFKJ"}},function(e,t,n){e.exports={main:"Tape_main__3GNJ6",slotsContainer:"Tape_slotsContainer__1Pc-P"}},function(e,t,n){e.exports={main:"FullSizeBlock_main__1gNfp",main_absolute:"FullSizeBlock_main_absolute__2wbtO"}},function(e,t,n){e.exports={main:"ScoreCounter_main__xe56H",scores:"ScoreCounter_scores__EcP3h"}},function(e,t,n){e.exports={main:"BackButton_main__3qz2x",main_disabled:"BackButton_main_disabled__L6IGz"}},function(e,t,n){e.exports={main:"Button_main__2MthA",main_continue:"Button_main_continue__1XqcD"}},,function(e,t,n){e.exports={main:"Main_main__3hbzX",content:"Main_content__Z3Lrs"}},,,,function(e,t,n){e.exports={main:"Coin_main__1aWmI"}},function(e,t,n){e.exports={main:"StartPage_main__3BRSA",header:"StartPage_header__3kki8",content:"StartPage_content__20Z1Z",playButton:"StartPage_playButton__3zTvQ"}},,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(19),s=n.n(o),a=n(11),c=n(12),l=n(4),u=n(2),d=function e(){var t=this;Object(l.a)(this,e),this.figures=[{blocks:[{color:"#FF7B1C",letter:"\u0410"}],type:1},{blocks:[{color:"#A258FF",letter:"\u0416"},{color:"#FF7B1C",letter:"\u0410"}],type:2},{blocks:[{color:"#FF7B1C",letter:"\u0420"}],type:1},{blocks:[{color:"#FF7B1C",letter:"\u0410"},{color:"#FF7B1C",letter:"\u0421"}],type:3},{blocks:[{color:"#0ABA9A",letter:"\u0410"}],type:1},{blocks:[{color:"#D73A8F",letter:"\u0424"}],type:1}],this.setFigures=function(e){t.figures=e},Object(u.n)(this)},h=n(21),f=n(20),v=n(10),p=n.n(v),b=n(17),m=n(5),g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.isDisableClickOutside;Object(l.a)(this,e),this.isVisible=!1,this.isDisableClickOutside=!1,this.isVisibleTransition=!1,Object(u.o)(this,{isVisible:u.p,isVisibleTransition:u.p,show:u.f,hide:u.f,handleTransitionEnd:u.f}),this.isDisableClickOutside=void 0!==n&&n,this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.handleTransitionEnd=this.handleTransitionEnd.bind(this),this.onClickOutside=this.onClickOutside.bind(this)}return Object(m.a)(e,[{key:"show",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isVisible=!0,this.isVisibleTransition=!0,e.next=4,Object(u.t)((function(){return!t.isVisibleTransition}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hide",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isVisible=!1,this.isVisibleTransition=!0,e.next=4,Object(u.t)((function(){return!t.isVisibleTransition}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleTransitionEnd",value:function(){this.isVisibleTransition=!1}},{key:"onClickOutside",value:function(){this.isDisableClickOutside||(this.isVisible=!1)}}]),e}(),j=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var i,r=e.isDisableClickOutside,o=e.onClickNewGame;return Object(l.a)(this,n),(i=t.call(this,{isDisableClickOutside:r})).onClickNewGame=void 0,i.onClickNewGame=function(){i.hide(),o()},i}return n}(g),C=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var i,r=e.isDisableClickOutside,o=e.onClickBreak,s=e.onClickContinue;return Object(l.a)(this,n),(i=t.call(this,{isDisableClickOutside:r})).onClickContinue=void 0,i.onClickBreak=void 0,i.onClickBreak=o,i.onClickContinue=function(){i.hide(),s()},i}return n}(g),y=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var i,r=e.isDisableClickOutside,o=e.onClickSinglePlay,s=e.onClickMultiplePlay;return Object(l.a)(this,n),(i=t.call(this,{isDisableClickOutside:r})).onClickSinglePlay=void 0,i.onClickMultiplePlay=void 0,i.onClickSinglePlay=function(){i.hide(),o()},i.onClickMultiplePlay=function(){i.hide(),s()},i}return n}(g),O={rus:[{letter:"\u0430",score:1,frequency:12.4843945},{letter:"\u0431",score:3,frequency:62.8930818},{letter:"\u0432",score:1,frequency:22.0264317},{letter:"\u0433",score:3,frequency:58.8235294},{letter:"\u0434",score:2,frequency:33.557047},{letter:"\u0435",score:1,frequency:11.8343195},{letter:"\u0451",score:3,frequency:2500},{letter:"\u0436",score:5,frequency:106.382979},{letter:"\u0437",score:5,frequency:60.6060606},{letter:"\u0438",score:1,frequency:13.6054422},{letter:"\u0439",score:4,frequency:82.6446281},{letter:"\u043a",score:2,frequency:28.6532951},{letter:"\u043b",score:2,frequency:22.7272727},{letter:"\u043c",score:2,frequency:31.152648},{letter:"\u043d",score:1,frequency:14.9253731},{letter:"\u043e",score:1,frequency:9.11577028},{letter:"\u043f",score:2,frequency:35.5871886},{letter:"\u0440",score:1,frequency:21.141649},{letter:"\u0441",score:1,frequency:18.2815356},{letter:"\u0442",score:1,frequency:15.9744409},{letter:"\u0443",score:2,frequency:38.1679389},{letter:"\u0444",score:10,frequency:384.615385},{letter:"\u0445",score:5,frequency:103.092784},{letter:"\u0446",score:5,frequency:208.333333},{letter:"\u0447",score:5,frequency:69.4444444},{letter:"\u0448",score:8,frequency:136.986301},{letter:"\u0449",score:10,frequency:277.777778},{letter:"\u044a",score:10,frequency:2500},{letter:"\u044b",score:4,frequency:52.6315789},{letter:"\u044c",score:3,frequency:57.4712644},{letter:"\u044d",score:8,frequency:312.5},{letter:"\u044e",score:8,frequency:156.25},{letter:"\u044f",score:3,frequency:49.7512438}]},_=(O.rus.map((function(e){return e.letter})),function(){function e(){Object(l.a)(this,e),this._words=[],this._scores=0,Object(u.n)(this,{},{autoBind:!0})}return Object(m.a)(e,[{key:"collectWord",value:function(e){this._words.push(e);var t=this._getWordScores(e);t&&(this._scores+=t)}},{key:"_getWordScores",value:function(e){try{return e.split("").reduce((function(t,n,i,r){var o,s=null===(o=O.rus.find((function(e){return e.letter===n})))||void 0===o?void 0:o.score;if(!s)throw new Error("\u0432 \u0441\u043b\u043e\u0432\u0435 ".concat(e," \u0434\u043b\u044f \u0431\u0443\u043a\u0432\u044b ").concat(n," \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u044b \u043e\u0447\u043a\u0438 \u0432 letterDistributions"));return t+=s}),0)}catch(t){console.warn(t)}}},{key:"words",get:function(){return this._words}},{key:"scores",get:function(){return this._scores}}]),e}()),k=function e(){var t=this;Object(l.a)(this,e),this.tape=new d,this.progressController=new _,this.isVisibleGamePage=!1,this.popupStartGame=new y({isDisableClickOutside:!0,onClickMultiplePlay:function(){console.log("multiple play")},onClickSinglePlay:function(){return t.handleGameStartClick}}),this.handleGameStartClick=function(){t.isVisibleGamePage=!0,console.log("handleGameStartClick")},Object(u.n)(this)},w=Object(i.createContext)(null);w.displayName="AppContext";var x,E,M,S,I,D,L,P,A,N=n(7),F=n(8),G=n.n(F),T=n(3),B=n(9),R=n(34),q=n.n(R),V=n(1),H=["isDisabled","children"],Z=function(e){var t=e.isDisabled,n=e.children,i=Object(B.a)(e,H);return Object(V.jsx)("div",Object(T.a)(Object(T.a)({},i),{},{className:G()(q.a.field,t&&q.a.field_disabled),children:Object(V.jsx)("div",{className:q.a.cells,children:n})}))},W=n(37),U=n.n(W),z=["isHovered","children"],X=r.a.forwardRef((function(e,t){var n=e.isHovered,i=void 0!==n&&n,r=(e.children,Object(B.a)(e,z));return Object(V.jsx)("div",Object(T.a)(Object(T.a)({ref:t},r),{},{className:G()(U.a.cell,i&&U.a.cell_hovered)}))})),J=n(38),K=n.n(J),Y=function(e){var t=e.children;return Object(V.jsx)("div",{className:K.a.main,children:Object(V.jsx)("div",{className:K.a.slotsContainer,children:t})})},Q=n(15),$=n.n(Q),ee=n(13),te=n(39),ne=n.n(te),ie=["className","absolute"],re=r.a.forwardRef((function(e,t){var n=e.className,i=e.absolute,r=void 0!==i&&i,o=Object(B.a)(e,ie);return Object(V.jsx)("div",Object(T.a)(Object(T.a)({},o),{},{ref:t,className:G()(ne.a.main,r&&ne.a.main_absolute,n)}))})),oe=["title","titleId"];function se(){return se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},se.apply(this,arguments)}function ae(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ce(e,t){var n=e.title,r=e.titleId,o=ae(e,oe);return i.createElement("svg",se({width:103,height:103,viewBox:"0 0 103 103",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},o),n?i.createElement("title",{id:r},n):null,i.createElement("mask",{id:"mask0_0_1",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:103,height:103},x||(x=i.createElement("rect",{width:103,height:103,rx:34,fill:"#C4C4C4"}))),E||(E=i.createElement("g",{mask:"url(#mask0_0_1)"},i.createElement("rect",{width:103,height:103,fill:"#FFC327"}))),M||(M=i.createElement("path",{d:"M63.9968 47.3813H39.0029C38.488 47.3813 38.0713 47.796 38.0713 48.3085C38.0713 55.6777 44.095 61.6734 51.4999 61.6734C58.9047 61.6734 64.9285 55.6777 64.9285 48.3085C64.9285 47.796 64.5118 47.3813 63.9968 47.3813ZM51.4999 59.8191C45.4361 59.8191 40.4477 55.1508 39.9719 49.2357H63.0279C62.5521 55.1508 57.5637 59.8191 51.4999 59.8191Z",fill:"black"})),S||(S=i.createElement("path",{d:"M51.5 16C34.6824 16 21 29.6157 21 46.3525V55.6475C21 65.9454 26.1844 75.0557 34.0871 80.5459C34.0875 80.5462 34.0882 80.5465 34.0886 80.5469C39.0297 83.9792 45.0306 86 51.5 86C61.9275 86 71.146 80.7627 76.6488 72.7953C76.653 72.7911 76.6548 72.7852 76.659 72.781C80.025 67.9013 82 62.0006 82 55.6475V46.3525C82 29.6157 68.3176 16 51.5 16ZM26.0776 68.7407C24.2083 65.1611 23.0783 61.1424 22.8948 56.8814C23.7164 59.0851 24.7902 61.1672 26.0776 63.0967V68.7407ZM33.8145 78.0365C31.5598 76.2689 29.5769 74.1747 27.9408 71.8219V65.6075C29.6472 67.6715 31.6257 69.502 33.8145 71.0583V78.0365ZM42.2656 82.6166C39.9188 81.8185 37.707 80.7294 35.6777 79.3854V72.2931C37.7277 73.5361 39.9371 74.542 42.2656 75.2799V82.6166ZM50.5684 84.1222C48.3497 84.0511 46.1936 83.7317 44.1288 83.1838V75.8044C46.2003 76.3181 48.3553 76.6158 50.5684 76.6823V84.1222ZM58.8666 83.1851C56.8033 83.7323 54.6487 84.0511 52.4316 84.1222V76.6823C54.6431 76.6158 56.7965 76.3184 58.8666 75.8054V83.1851ZM66.478 79.9246C64.6834 81.0251 62.7566 81.9293 60.7299 82.6181V75.2814C62.7452 74.6432 64.6675 73.7984 66.478 72.778V79.9246ZM75.0592 71.8219C73.2215 74.4646 70.9478 76.7831 68.3412 78.6762V71.6424C70.8694 69.9693 73.1355 67.9344 75.0592 65.6075V71.8219ZM76.9224 68.7407V63.0967C78.2098 61.1672 79.2836 59.0851 80.1052 56.8814C79.9217 61.1424 78.7917 65.1611 76.9224 68.7407ZM51.6083 74.8488C51.5711 74.8444 51.5384 74.8271 51.5 74.8271C51.4616 74.8271 51.429 74.8444 51.3918 74.8488C35.6512 74.7902 22.8633 62.0309 22.8633 46.3525C22.8633 30.6389 35.7096 17.8543 51.5 17.8543C67.2904 17.8543 80.1367 30.6389 80.1367 46.3525C80.1367 62.0309 67.3488 74.7902 51.6083 74.8488Z",fill:"black"})),I||(I=i.createElement("path",{d:"M51.5005 22.1787C38.1065 22.1787 27.209 33.023 27.209 46.3526C27.209 59.6822 38.1065 70.5274 51.5005 70.5274C64.8946 70.5274 75.7912 59.6822 75.7912 46.3526C75.7912 33.023 64.8946 22.1787 51.5005 22.1787ZM51.5005 68.673C39.1337 68.673 29.0722 58.66 29.0722 46.3526C29.0722 34.0452 39.1337 24.033 51.5005 24.033C63.8674 24.033 73.9279 34.0452 73.9279 46.3526C73.9279 58.66 63.8674 68.673 51.5005 68.673Z",fill:"black"})),D||(D=i.createElement("path",{d:"M60.3763 36.4072C56.6735 36.4072 53.6611 39.4051 53.6611 43.0901C53.6611 43.6026 54.0778 44.0173 54.5928 44.0173H66.1599C66.6749 44.0173 67.0915 43.6026 67.0915 43.0901C67.0915 39.4051 64.0792 36.4072 60.3763 36.4072ZM55.6145 42.163C56.0503 39.9429 58.02 38.2615 60.3763 38.2615C62.7327 38.2615 64.7024 39.9429 65.1382 42.163H55.6145Z",fill:"black"})),L||(L=i.createElement("path",{d:"M61.8117 39.2856H58.9404C58.4255 39.2856 58.0088 39.7004 58.0088 40.2131C58.0088 40.7257 58.4255 41.1405 58.9404 41.1405H61.8117C62.3267 41.1405 62.7434 40.7257 62.7434 40.2131C62.7434 39.7004 62.3267 39.2856 61.8117 39.2856Z",fill:"black"})),P||(P=i.createElement("path",{d:"M49.3396 43.0901C49.3396 39.4051 46.3273 36.4072 42.6244 36.4072C38.9215 36.4072 35.9092 39.4051 35.9092 43.0901C35.9092 43.6026 36.3259 44.0173 36.8408 44.0173H48.408C48.9229 44.0173 49.3396 43.6026 49.3396 43.0901ZM37.8625 42.163C38.2983 39.9429 40.268 38.2615 42.6244 38.2615C44.9808 38.2615 46.9505 39.9429 47.3863 42.163H37.8625Z",fill:"black"})),A||(A=i.createElement("path",{d:"M44.0598 39.2856H41.1885C40.6735 39.2856 40.2568 39.7004 40.2568 40.2131C40.2568 40.7257 40.6735 41.1405 41.1885 41.1405H44.0598C44.5747 41.1405 44.9914 40.7257 44.9914 40.2131C44.9914 39.7004 44.5747 39.2856 44.0598 39.2856Z",fill:"black"})))}var le,ue,de=i.forwardRef(ce),he=(n.p,{scores:0}),fe=n(40),ve=n.n(fe),pe=["className","scores"],be=function(e){var t=Object(T.a)(Object(T.a)({},he),e),n=(t.className,t.scores),i=Object(B.a)(t,pe),o=r.a.useRef(null),s=r.a.useState(null),a=Object(ee.a)(s,2),c=a[0],l=a[1],u=c?c/120:1,d=r.a.useMemo((function(){return{fontSize:"".concat(20*u,"px")}}),[u]);return r.a.useEffect((function(){var e=o.current,t=function(){return l(e.offsetWidth)};return t(),window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),Object(V.jsxs)(re,Object(T.a)(Object(T.a)({},i),{},{ref:o,className:G()(ve.a.main),children:[Object(V.jsx)(re,{absolute:!0,children:Object(V.jsx)(de,{})}),Object(V.jsx)("div",{style:d,className:ve.a.scores,children:n})]}))},me=["title","titleId"];function ge(){return ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ge.apply(this,arguments)}function je(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ce(e,t){var n=e.title,r=e.titleId,o=je(e,me);return i.createElement("svg",ge({width:80,height:80,viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},o),n?i.createElement("title",{id:r},n):null,le||(le=i.createElement("path",{d:"M62 17L17 62",stroke:"white",strokeWidth:6,strokeLinecap:"round"})),ue||(ue=i.createElement("path",{d:"M17 17L62 62",stroke:"white",strokeWidth:6,strokeLinecap:"round"})))}var ye,Oe,_e,ke,we,xe,Ee,Me,Se=i.forwardRef(Ce),Ie=(n.p,n(41)),De=n.n(Ie),Le=["className","disabled","style","onClick"],Pe=function(e){var t=e.className,n=e.disabled,i=e.style,o=e.onClick,s=Object(B.a)(e,Le),a=r.a.useRef(null),c=r.a.useState(null),l=Object(ee.a)(c,2),u=l[0],d=l[1],h=u?u/80:1,f=r.a.useMemo((function(){return Object(T.a)(Object(T.a)({},i),{},{borderWidth:"".concat(7*h,"px")})}),[h,i]);return r.a.useEffect((function(){var e=a.current,t=function(){return d(e.offsetWidth)};return t(),window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),Object(V.jsx)(re,Object(T.a)(Object(T.a)({},s),{},{ref:a,style:f,className:G()(De.a.main,n&&De.a.main_disabled,t),onClick:o,children:Object(V.jsx)(Se,{})}))},Ae=n(28),Ne=n.n(Ae),Fe=n(24),Ge=n.n(Fe),Te=n(42),Be=n.n(Te),Re=function(e){var t=e.children,n=e.className,i=e.onClick,r=e.type,o=void 0===r?"default":r;return Object(V.jsx)("button",{type:"button",tabIndex:-1,className:G()(Be.a.main,Be.a["main_".concat(o)],n),onClick:i,children:t})},qe=function(e){var t=e.text,n=e.onClickBreak,i=e.onClickContinue;return Object(V.jsxs)("div",{className:Ge.a.popupContent,children:[Object(V.jsx)("div",{className:Ge.a.textWrap,children:Object(V.jsx)("div",{className:Ge.a.text,children:t||"\u0425\u043e\u0447\u0435\u0448\u044c \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c \u0438\u0433\u0440\u0443\r\n\u0438\u043b\u0438 \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c?"})}),Object(V.jsxs)("div",{className:Ge.a.buttonsWrap,children:[Object(V.jsx)(Re,{type:"continue",className:Ge.a.btn,onClick:i,children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f"}),Object(V.jsx)(Re,{type:"break",className:Ge.a.btn,onClick:n,children:"\u0417\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c \u0438\u0433\u0440\u0443"})]})]})},Ve=function(e){var t=e.text,n=e.onClickOutside,i=e.onClickBreak,r=e.onClickContinue;return Object(V.jsxs)("div",{className:Ne.a.wrap,children:[Object(V.jsx)("div",{className:Ne.a.overlay,onClick:n}),Object(V.jsx)("div",{className:G()(Ne.a.popup,Ne.a.popup_continueGame),children:Object(V.jsx)(qe,{text:t,onClickBreak:i,onClickContinue:r})})]})},He=n(29),Ze=n.n(He),We=n(16),Ue=n.n(We),ze=n(35),Xe=n.n(ze),Je=function(e){var t="\u043e\u0447\u043a\u043e\u0432";switch(e){case 1:t="\u043e\u0447\u043a\u043e";break;case 2:case 3:case 4:t="\u043e\u0447\u043a\u0430"}return t},Ke=function(){return Object(V.jsx)("div",{className:Xe.a.table,children:O.rus.map((function(e,t){var n=e.letter,i=e.score;return Object(V.jsxs)("p",{children:[Object(V.jsxs)("span",{className:Xe.a.letter,children:[n," \u2014 "]}),Object(V.jsx)("span",{className:Xe.a.letterScore,children:i})," ",Je(i)]},"letter_".concat(n,"_").concat(t))}))})},Ye=n(30),Qe=n.n(Ye),$e=function(e){var t=e.scores,n=e.words;return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("div",{className:G()(Qe.a.title,Qe.a.titleWords),children:"\u0421\u043b\u043e\u0432\u0430:"}),Object(V.jsx)("div",{className:G()(Qe.a.scores),children:"\u0412\u0441\u0435\u0433\u043e \u043e\u0447\u043a\u043e\u0432: ".concat(t)}),Object(V.jsx)("div",{className:Qe.a.words,children:n.map((function(e,t){return Object(V.jsx)("p",{children:e},"word_".concat(e,"_").concat(t))}))})]})},et=function(e){var t=e.onClickBreak,n=e.words,r=e.scores,o=Object(i.useState)(!0),s=Object(ee.a)(o,2),a=s[0],c=s[1];return Object(V.jsxs)("div",{className:Ue.a.popupContent,children:[Object(V.jsx)("div",{className:Ue.a.textWrap,children:Object(V.jsxs)("div",{className:G()(Ue.a.container,Ue.a["container_".concat(a?"result":"table")]),children:[Object(V.jsxs)("div",{className:Ue.a.tabs,children:[Object(V.jsx)("div",{className:G()(Ue.a.tab,a&&Ue.a.tabActive),onClick:function(){c(!0)},children:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0438\u0433\u0440\u044b"}),Object(V.jsx)("div",{className:G()(Ue.a.tab,!a&&Ue.a.tabActive),onClick:function(){c(!1)},children:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u0438 \u0431\u0443\u043a\u0432"})]}),!a&&Object(V.jsx)(Ke,{}),a&&Object(V.jsx)($e,{words:n,scores:r})]})}),Object(V.jsx)("div",{className:Ue.a.buttonsWrap,children:Object(V.jsx)(Re,{className:Ue.a.btn,onClick:t,children:"\u041d\u0430\u0447\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0438\u0433\u0440\u0443"})})]})},tt=n(6),nt=function(e){var t=e.words,n=e.scores,r=e.onClickOutside,o=e.onClickNewGame,s=Object(tt.g)(),a=Object(i.useCallback)((function(){o(),s("/")}),[o,s]);return Object(V.jsxs)("div",{className:Ze.a.wrap,children:[Object(V.jsx)("div",{className:Ze.a.overlay,onClick:r}),Object(V.jsx)("div",{className:G()(Ze.a.popup,Ze.a.popup_resultGame),children:Object(V.jsx)(et,{scores:n,words:t,onClickBreak:a})})]})},it=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=r.a.useRef();return r.a.useEffect((function(){t.forEach((function(e){e&&("function"===typeof e?e(i.current||null):e.current=i.current||null)}))}),[t]),i},rt="#FF7B1C",ot="#545AEF",st="#0ABA9A",at="#FFDC27",ct="#A258FF",lt="#18C2E8",ut="#D73A8F",dt={color:st,disabled:!1,hovered:!1,selected:!1,hoverable:!1},ht=n(22),ft=n.n(ht),vt=["color","children","className","disabled","selected","hovered","hoverable","style"],pt=r.a.forwardRef((function(e,t){var n=Object(T.a)(Object(T.a)({},dt),e),i=n.color,o=n.children,s=n.className,a=n.disabled,c=n.selected,l=n.hovered,u=n.hoverable,d=n.style,h=Object(B.a)(n,vt),f=it(t),v=r.a.useState(null),p=Object(ee.a)(v,2),b=p[0],m=p[1],g=b?b/50:1,j=r.a.useMemo((function(){return Object(T.a)(Object(T.a)({},d),{},{fontSize:"".concat(28*g,"px")})}),[g,d]);return r.a.useEffect((function(){var e=f.current,t=function(){return m(e.offsetWidth)};return t(),window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[f]),Object(V.jsx)(re,Object(T.a)(Object(T.a)({},h),{},{ref:f,style:j,className:G()(ft.a.main,c&&ft.a.main_selected,u&&ft.a.main_hoverable,l&&ft.a.main_hovered,a&&ft.a.main_disabled,s),children:Object(V.jsxs)(re,{className:ft.a.scaleWrap,children:[Object(V.jsx)(re,{className:ft.a.background,style:{backgroundColor:i,boxShadow:"".concat(2*g,"px ").concat(2*g,"px ").concat(2*g,"px rgba(34, 0, 135, 0.25)")},absolute:!0}),Object(V.jsx)(re,{className:ft.a.content,absolute:!0,children:o})]})}))})),bt=r.a.forwardRef((function(e,t){return Object(V.jsx)("div",Object(T.a)({ref:t},e))})),mt=r.a.createContext(null),gt=function(){var e=r.a.useContext(mt);if(!e)throw new Error("DraggerStoreContext value was not provided");return e},jt=function(){function e(){Object(l.a)(this,e),this.items=[],Object(u.n)(this,{},{autoBind:!0})}return Object(m.a)(e,[{key:"findById",value:function(e){return this.items.find((function(t){return t.id===e}))}},{key:"findByElement",value:function(e){return this.items.find((function(t){return t.element===e}))}},{key:"add",value:function(e){var t=this;return Object(u.r)((function(){t.items=t.items.concat(e)})),e}}]),e}(),Ct=function(e,t){var n=e.getBoundingClientRect(),i=t.getBoundingClientRect();return{left:i.left-n.left,top:i.top-n.top}},yt=function(){function e(){Object(l.a)(this,e),this.data=null}return Object(m.a)(e,[{key:"calculateIntersectedElements",value:function(t,n){var i=e.getIntersectionData(t,n).filter((function(e){return 0!==e.area})),r=null,o=null;return null!==this.data&&0!==this.data.length&&(r=this.data.reduce((function(e,t){return e.area>t.area?e:t}))),this.data=i,null!==this.data&&0!==this.data.length&&(o=this.data.reduce((function(e,t){return e.area>t.area?e:t}))),{prev:r,current:o}}},{key:"clearIntersection",value:function(){this.data=null}}],[{key:"getIntersectionArea",value:function(e,t){var n=0,i=0,r=e.getBoundingClientRect(),o=t.getBoundingClientRect(),s=Math.max(r.x+r.width,o.x+o.width)-Math.min(r.x,o.x),a=r.width+o.width,c=Math.max(r.y+r.height,o.y+o.height)-Math.min(r.y,o.y),l=r.height+o.height;return s<=a&&(i=a-s),c<=l&&(n=l-c),i*n}},{key:"getIntersectionData",value:function(e,t){var n=this;return t.map((function(t,i){return{index:i,element:t,area:n.getIntersectionArea(e,t)}}))}}]),e}(),Ot=function(){function e(t){Object(l.a)(this,e),this.intersectionCalculators=[],this.plates=void 0,this.slots=void 0,Object(u.n)(this,{},{autoBind:!0}),this.plates=t.plates,this.slots=t.slots}return Object(m.a)(e,[{key:"platesInDrag",get:function(){return this.plates.items.filter((function(e){return e.inDrag}))}},{key:"inDrag",get:function(){return!!this.platesInDrag}},{key:"assertDragStarted",value:function(){if(!this.inDrag)throw new Error("".concat(this.constructor.name,": drag was not started"))}},{key:"startDrag",value:function(e){var t=this,n=e.event,i=e.data,r=this.plates.findByElement(i.element);if(!r.disabled){var o=this.slots.findById(r.slotId),s=Ct(o.element,r.element);(r.group?this.plates.items.filter((function(e){return e.group===r.group})):[r]).forEach((function(e){var r,o;t.intersectionCalculators.push(new yt);var a={x:s.left,y:s.top};if(e.centered){var c=i.element.getBoundingClientRect();a.x=i.point.x-c.x-c.width/2,a.y=i.point.y-c.y-c.height/2}e.startDrag(),e.setTranslate(a),null===(r=e.callbacks)||void 0===r||null===(o=r.onStartDrag)||void 0===o||o.call(r,n,i)}))}}},{key:"moveDrag",value:function(e){var t=this,n=e.event,i=e.data;this.assertDragStarted(),this.platesInDrag.forEach((function(e,r){var o,s;e.setTranslate({x:e.translate.x+i.deltaPoint.x,y:e.translate.y+i.deltaPoint.y}),null===(o=e.callbacks)||void 0===o||null===(s=o.onMoveDrag)||void 0===s||s.call(o,n,i);var a=t.intersectionCalculators[r].calculateIntersectedElements(e.intersectionElement,t.slots.items.map((function(e){return e.intersectionElement}))),c=a.prev,l=a.current,u=l?t.slots.items[l.index]:null,d=c?t.slots.items[c.index]:null;if(!u&&d){var h,f,v,p,b={plateId:e.id,slotId:d.id};null===(h=e.callbacks)||void 0===h||null===(f=h.onIntersectionOut)||void 0===f||f.call(h,b),null===(v=d.callbacks)||void 0===v||null===(p=v.onIntersectionOut)||void 0===p||p.call(v,b)}else if(u&&!d){var m,g,j,C,y={plateId:e.id,slotId:u.id};null===(m=e.callbacks)||void 0===m||null===(g=m.onIntersectionIn)||void 0===g||g.call(m,y),null===(j=u.callbacks)||void 0===j||null===(C=j.onIntersectionIn)||void 0===C||C.call(j,y)}else if(u&&d&&u.id!==d.id){var O,_,k,w,x,E,M,S;null===(O=e.callbacks)||void 0===O||null===(_=O.onIntersectionOut)||void 0===_||_.call(O,{plateId:e.id,slotId:d.id}),null===(k=d.callbacks)||void 0===k||null===(w=k.onIntersectionOut)||void 0===w||w.call(k,{plateId:e.id,slotId:d.id}),null===(x=e.callbacks)||void 0===x||null===(E=x.onIntersectionIn)||void 0===E||E.call(x,{plateId:e.id,slotId:u.id}),null===(M=u.callbacks)||void 0===M||null===(S=M.onIntersectionIn)||void 0===S||S.call(M,{plateId:e.id,slotId:u.id})}}))}},{key:"finishDrag",value:function(e){var t=e.event,n=e.data;this.assertDragStarted(),this.intersectionCalculators=[],this.platesInDrag.forEach((function(e){var i,r;e.finishDrag(),null===(i=e.callbacks)||void 0===i||null===(r=i.onFinishDrag)||void 0===r||r.call(i,t,n)}))}}]),e}(),_t=function e(){Object(l.a)(this,e),this.plates=new jt,this.slots=new jt,this.operator=new Ot({plates:this.plates,slots:this.slots}),Object(u.n)(this,{},{autoBind:!0})},kt=function(e){var t=e.children,n=Object(c.d)((function(){return new _t}));return Object(V.jsx)(mt.Provider,{value:n,children:t})},wt=n(25),xt=function(){function e(t){Object(l.a)(this,e),this.id=void 0,this.element=null,Object(u.o)(this,{element:u.p,setElement:u.f.bound}),this.id=t.id}return Object(m.a)(e,[{key:"setElement",value:function(e){this.element=e}}]),e}(),Et=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var i,r,o;return Object(l.a)(this,n),(o=t.call(this,e)).elementSelector=void 0,o.intersectionSelector=void 0,o.callbacks=void 0,Object(u.o)(Object(wt.a)(o),{callbacks:u.p,intersectionElement:u.g,currentElement:u.g,setCallbacks:u.f.bound}),o.elementSelector=null!==(i=e.elementSelector)&&void 0!==i?i:null,o.intersectionSelector=null!==(r=e.intersectionSelector)&&void 0!==r?r:null,o.callbacks=e.callbacks,o}return Object(m.a)(n,[{key:"intersectionElement",get:function(){var e;if(!this.intersectionSelector)return this.element;var t=null===(e=this.element)||void 0===e?void 0:e.querySelector(this.intersectionSelector);return t||this.element}},{key:"currentElement",get:function(){var e;if(!this.elementSelector)return this.element;var t=null===(e=this.element)||void 0===e?void 0:e.querySelector(this.elementSelector);return t||t}},{key:"setCallbacks",value:function(e){this.callbacks=e}}]),n}(xt),Mt=["Component","id","intersectionSelector","elementSelector","onIntersectionIn","onIntersectionOut"],St=Object(a.a)((function(e){var t=e.Component,n=e.id,i=e.intersectionSelector,o=e.elementSelector,s=e.onIntersectionIn,a=e.onIntersectionOut,c=Object(B.a)(e,Mt),l=r.a.useRef(null),u=gt(),d=r.a.useMemo((function(){return u.slots.add(new Et({id:n,intersectionSelector:i,elementSelector:o,callbacks:{onIntersectionIn:s,onIntersectionOut:a}}))}),[u.slots,o,n,i,s,a]);return r.a.useEffect((function(){d.setElement(l.current)}),[d]),r.a.useEffect((function(){d.setCallbacks({onIntersectionIn:s,onIntersectionOut:a})}),[s,a,d]),Object(V.jsx)(t,Object(T.a)(Object(T.a)({},c),{},{ref:l}))})),It=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var i,r,o;return Object(l.a)(this,n),(o=t.call(this,e)).translate={x:0,y:0},o.slotId=void 0,o.inDrag=!1,o.centered=void 0,o.group=void 0,o.intersectionSelector=void 0,o.disabled=!1,o.callbacks=void 0,Object(u.o)(Object(wt.a)(o),{translate:u.p,slotId:u.p,inDrag:u.p,group:u.p,disabled:u.p,intersectionElement:u.g,startDrag:u.f.bound,finishDrag:u.f.bound,setTranslate:u.f.bound,setSlotId:u.f.bound}),o.slotId=e.slotId,o.disabled=null!==(i=e.disabled)&&void 0!==i&&i,o.group=e.group,o.centered=e.centered,o.intersectionSelector=null!==(r=e.intersectionSelector)&&void 0!==r?r:null,o.callbacks=e.callbacks,o}return Object(m.a)(n,[{key:"intersectionElement",get:function(){var e;if(!this.intersectionSelector)return this.element;var t=null===(e=this.element)||void 0===e?void 0:e.querySelector(this.intersectionSelector);return t||this.element}},{key:"setCallbacks",value:function(e){this.callbacks=e}},{key:"startDrag",value:function(){this.inDrag=!0}},{key:"finishDrag",value:function(){this.inDrag=!1}},{key:"setTranslate",value:function(e){this.translate=e}},{key:"setSlotId",value:function(e){this.slotId=e}},{key:"setDisabled",value:function(e){this.disabled=e}}]),n}(xt),Dt=function(){function e(t){var n=t.expression,i=t.handler,r=t.options;Object(l.a)(this,e),this.disposer=null,this.expression=void 0,this.handler=void 0,this.options=void 0,this.expression=n,this.handler=i,this.options=r,this.handle=this.handle.bind(this)}return Object(m.a)(e,[{key:"init",value:function(){this.disposer=Object(u.q)(this.expression,this.handle,this.options)}},{key:"dispose",value:function(){var e;null===(e=this.disposer)||void 0===e||e.call(this),this.disposer=null}},{key:"handle",value:function(e,t,n){try{this.handler(e,t,n)}catch(i){throw window.dispatchEvent(new ErrorEvent("error",i)),i}}}]),e}(),Lt=function(){function e(t){var n=this;Object(l.a)(this,e),this.props=void 0,this.plateModel=void 0,this.reactions={slotId:new Dt({expression:function(){return n.props.slotId},handler:function(e){return n.model.setSlotId(e)}}),callbacks:new Dt({expression:function(){var e=n.props;return{onAfterDragMoving:e.onAfterDragMoving,onAfterDragMovingEnd:e.onAfterDragMovingEnd,onStartDrag:e.onStartDrag,onMoveDrag:e.onMoveDrag,onFinishDrag:e.onFinishDrag,onIntersectionIn:e.onIntersectionIn,onIntersectionOut:e.onIntersectionOut}},handler:function(e){n.model.setCallbacks(e)}})},this.dragger=void 0,this.element=null,Object(u.n)(this,{props:u.p.shallow},{autoBind:!0}),this.initReactions(),this.element=t.element,this.dragger=t.dragger,this.setProps(t.props),this.plateModel=this.dragger.plates.add(new It({id:this.props.id,slotId:this.props.slotId,centered:this.props.centered,group:this.props.group,disabled:this.props.disabled,intersectionSelector:this.props.intersectionSelector,callbacks:{onAfterDragMoving:this.props.onAfterDragMoving,onAfterDragMovingEnd:this.props.onAfterDragMovingEnd,onStartDrag:this.props.onStartDrag,onMoveDrag:this.props.onMoveDrag,onFinishDrag:this.props.onFinishDrag,onIntersectionIn:this.props.onIntersectionIn,onIntersectionOut:this.props.onIntersectionOut}}))}return Object(m.a)(e,[{key:"model",get:function(){return this.dragger.plates.findById(this.props.id)}},{key:"slot",get:function(){return this.dragger.slots.findById(this.model.slotId)}},{key:"draggableProps",get:function(){var e=this;return{onStartDrag:function(t,n){e.dragger.operator.startDrag({event:t,data:n})},onMoveDrag:function(t,n){e.dragger.operator.moveDrag({event:t,data:n})},onFinishDrag:function(t,n){e.dragger.operator.finishDrag({event:t,data:n})}}}},{key:"elementMoverProps",get:function(){var e,t,n,i;return Object(T.a)({Component:this.props.Component,anchor:null===(e=this.slot)||void 0===e?void 0:e.currentElement,translate:this.model.translate,bounded:"default"===this.props.state?!this.model.inDrag:"bounded"===this.props.state,duration:null!==(t=this.props.afterDragMovingDuration)&&void 0!==t?t:500,withAnimation:null===(n=this.props.withMovingAfterDrag)||void 0===n||n,easing:null!==(i=this.props.afterDragMovingEasing)&&void 0!==i?i:"easeInOutQuad",calculationHelper:this.props.afterDragMovingPositionCalculationHelper,onMoving:this.props.onAfterDragMoving,onMovingEnd:this.props.onAfterDragMovingEnd},Object(N.omit)(this.props,["style","Component","id","slotId","withMovingAfterDrag","afterDragMovingDuration","afterDragMovingEasing","afterDragMovingPositionCalculationHelper","onAfterDragMoving","onAfterDragMovingEnd","onStartDrag","onMoveDrag","onFinishDrag","onIntersectionIn","onIntersectionOut"]))}},{key:"initReactions",value:function(){Object.values(this.reactions).forEach((function(e){return e.init()}))}},{key:"setProps",value:function(e){var t,n,i;this.props=e,this.props.state=null!==(t=this.props.state)&&void 0!==t?t:"default",this.props.disabled=null!==(n=this.props.disabled)&&void 0!==n&&n,null===(i=this.plateModel)||void 0===i||i.setDisabled(this.props.disabled)}},{key:"setElement",value:function(e){this.element=e,this.model.setElement(e)}},{key:"clear",value:function(){Object.values(this.reactions).forEach((function(e){return e.dispose()}))}}]),e}(),Pt=r.a.createContext(null),At=n(46),Nt=n(47),Ft=n.n(Nt).a.map((function(e){return e.trim()})).sort().filter((function(e){return"\u0436"!==e})),Gt="easeInOutQuad",Tt=function(){function e(t){Object(l.a)(this,e),this.translate=void 0,this.anchor=void 0,this.withAnimation=!1,this.firstRender=!0,Object(u.n)(this,{},{autoBind:!0}),this.setAnchor(t.anchor),this.setTranslate(t.translate),this.setWithAnimation(t.withAnimation)}return Object(m.a)(e,[{key:"calculatedTransformStyle",get:function(){return{transform:"translate(".concat(this.translate.x,"px, ").concat(this.translate.y,"px)")}}},{key:"passFirstRender",value:function(){this.firstRender=!1}},{key:"setTranslate",value:function(e){this.translate=e}},{key:"setAnchor",value:function(e){this.withAnimation=!0,this.anchor=e}},{key:"setWithAnimation",value:function(e){this.withAnimation=e}}]),e}(),Bt=function(e){var t=e.className,n=e.parent,i=e.containerStyle,o=e.children,a=r.a.useMemo((function(){var e=document.createElement("div");return e.style.width="100%",e.style.height="100%",e}),[]);return r.a.useLayoutEffect((function(){Object(N.entries)(i).forEach((function(e){var t=Object(ee.a)(e,2),n=t[0],i=t[1];a.style[n]=i}))}),[i,a.style]),r.a.useLayoutEffect((function(){a.className=null!==t&&void 0!==t?t:""}),[t,a]),r.a.useLayoutEffect((function(){n.appendChild(a)}),[n,a]),r.a.useLayoutEffect((function(){return function(){return a.remove()}}),[a]),s.a.createPortal(o,a)},Rt=["anchor","duration","Component","style","easing","bounded","translate","withAnimation","calculationHelper","reparentableContainerStyle","onMoving","onMovingEnd"],qt=function(e){return e.currentTranslate},Vt={x:0,y:0},Ht=Object(a.a)(r.a.forwardRef((function(e,t){var n=e.anchor,i=e.duration,o=void 0===i?500:i,s=e.Component,a=e.style,l=e.easing,u=void 0===l?Gt:l,d=e.bounded,h=void 0===d||d,f=e.translate,v=void 0===f?Vt:f,p=e.withAnimation,b=void 0===p||p,m=e.calculationHelper,g=void 0===m?qt:m,j=e.reparentableContainerStyle,C=e.onMoving,y=e.onMovingEnd,O=Object(B.a)(e,Rt),_=r.a.useRef({onMoving:C,onMovingEnd:y});r.a.useEffect((function(){_.current={onMoving:C,onMovingEnd:y}}),[C,y]);var k=Object(c.d)((function(){return new Tt({anchor:n,translate:v,withAnimation:b})})),w=it(t),x=r.a.useRef(null),E=r.a.useMemo((function(){return Object(T.a)(Object(T.a)({},a),k.calculatedTransformStyle)}),[k.calculatedTransformStyle,a]);return r.a.useEffect((function(){if(!k.firstRender&&w.current&&h){var e=Ct(n,w.current);k.setAnchor(n),k.setTranslate({x:e.left,y:e.top})}}),[n,k,h]),r.a.useEffect((function(){return k.setWithAnimation(b)}),[k,b]),r.a.useEffect((function(){h||k.setTranslate(v)}),[h,v,k]),r.a.useEffect((function(){var e;h||(null===(e=x.current)||void 0===e||e.pause())}),[h]),r.a.useEffect((function(){return k.setWithAnimation(b)}),[k,b]),r.a.useEffect((function(){h||k.setTranslate(v)}),[h,v,k]),r.a.useEffect((function(){var e;h||(null===(e=x.current)||void 0===e||e.pause())}),[h]),r.a.useEffect((function(){if(h){var e=Object(T.a)({},k.translate),t=Object(T.a)({},k.translate),n={x:0,y:0};x.current&&x.current.pause(),k.withAnimation&&!k.firstRender?x.current=Object(At.a)(Object(T.a)(Object(T.a)({targets:t},n),{},{duration:o,easing:u,update:function(){var i,r;k.setTranslate(g({startTranslate:e,currentTranslate:t,finishTranslate:n})),null===(i=(r=_.current).onMoving)||void 0===i||i.call(r,t)},complete:function(){var e,t;null===(e=(t=_.current).onMovingEnd)||void 0===e||e.call(t,n)}})):k.setTranslate(n)}}),[k.anchor,h]),r.a.useEffect((function(){return function(){var e;return null===(e=x.current)||void 0===e?void 0:e.pause()}}),[]),r.a.useEffect((function(){return k.passFirstRender()}),[k]),Object(V.jsx)(Bt,{parent:k.anchor,containerStyle:j,children:Object(V.jsx)(s,Object(T.a)(Object(T.a)({},O),{},{ref:w,style:E}))})}))),Zt=Object(a.a)(r.a.forwardRef((function(e,t){var n=function(){var e=r.a.useContext(Pt);if(!e)throw new Error("PlateStoreContext values was not provided");return e}().elementMoverProps,i=n.Component,o=n.anchor,s=n.translate,a=n.bounded,c=n.duration,l=n.withAnimation,u=n.easing,d=n.calculationHelper,h=n.onMoving,f=n.onMovingEnd,v=n.componentProps;return Object(V.jsx)(Ht,Object(T.a)(Object(T.a)({},v),{},{ref:t,Component:i,anchor:o,translate:s,bounded:a,duration:c,withAnimation:l,easing:u,calculationHelper:d,onMoving:h,onMovingEnd:f}))}))),Wt=10,Ut=10,zt=function(e){if(function(e){return["mousedown","mousemove","mouseup"].includes(e.type)}(e)){var t=e;return{x:t.pageX,y:t.pageY}}var n=e;return{x:n.changedTouches[0].pageX,y:n.changedTouches[0].pageY}},Xt=function(){function e(t){Object(l.a)(this,e),this.callbacks={},this.element=void 0,this.elementCaptured=!1,this.startEvent=null,this.prevMoveEvent=null,this.moveEvent=null,this.type=null,Object(u.n)(this,{},{autoBind:!0}),this.element=t.element,this.callbacks=t,this.initListeners()}return Object(m.a)(e,[{key:"draggableData",get:function(){if(!this.startEvent)return null;var e=zt(this.startEvent),t=this.prevMoveEvent?zt(this.prevMoveEvent):e,n=this.moveEvent?zt(this.moveEvent):e;return{type:this.type,element:this.element,point:n,deltaPoint:{x:n.x-t.x,y:n.y-t.y},offsetPoint:{x:n.x-e.x,y:n.y-e.y}}}},{key:"deviceIsTouch",get:function(){return document.body.classList.contains("touch")}},{key:"initListeners",value:function(){e.addListener("mousedown",this.handleMouseDown),e.addListener("mousemove",this.handleMouseMove),e.addListener("mouseup",this.handleMouseUp),e.addListener("touchstart",this.handleTouchStart),e.addListener("touchmove",this.handleTouchMove),e.addListener("touchend",this.handleTouchEnd)}},{key:"isOffsetSmall",value:function(){if(!this.startEvent||!this.moveEvent)return!0;var e=zt(this.startEvent),t=zt(this.moveEvent),n=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return n<Wt&&i<Ut}},{key:"setMoveEvent",value:function(e){this.prevMoveEvent=this.moveEvent,this.moveEvent=e}},{key:"clearSavedEvents",value:function(){this.startEvent=null,this.prevMoveEvent=null,this.moveEvent=null}},{key:"handleMouseDown",value:function(e){if(!this.deviceIsTouch&&e.target instanceof Node&&this.element.contains(e.target)){var t,n,i,r;if(null!==this.type)return this.type=null,this.elementCaptured=!1,null===(t=(n=this.callbacks).onFinishDrag)||void 0===t||t.call(n,e,this.draggableData),void this.clearSavedEvents();if(null===this.type)this.type="drag-and-drop",this.startEvent=e,this.elementCaptured=!0,null===(i=(r=this.callbacks).onStartDrag)||void 0===i||i.call(r,e,this.draggableData)}}},{key:"handleMouseMove",value:function(e){var t,n;this.deviceIsTouch||this.elementCaptured&&(this.setMoveEvent(e),null===(t=(n=this.callbacks).onMoveDrag)||void 0===t||t.call(n,e,this.draggableData))}},{key:"handleMouseUp",value:function(e){var t,n;this.deviceIsTouch||this.elementCaptured&&(this.isOffsetSmall()?this.type="click-and-click":(this.type=null,this.elementCaptured=!1,null===(t=(n=this.callbacks).onFinishDrag)||void 0===t||t.call(n,e,this.draggableData),this.clearSavedEvents()))}},{key:"handleTouchStart",value:function(e){var t,n;e.target instanceof Node&&this.element.contains(e.target)&&(this.startEvent=e,this.type="drag-and-drop",this.elementCaptured=!0,null===(t=(n=this.callbacks).onStartDrag)||void 0===t||t.call(n,e,this.draggableData))}},{key:"handleTouchMove",value:function(e){var t,n;this.elementCaptured&&(this.setMoveEvent(e),null===(t=(n=this.callbacks).onMoveDrag)||void 0===t||t.call(n,e,this.draggableData))}},{key:"handleTouchEnd",value:function(e){var t,n;this.elementCaptured&&(this.elementCaptured=!1,null===(t=(n=this.callbacks).onFinishDrag)||void 0===t||t.call(n,e,this.draggableData),this.type=null,this.clearSavedEvents())}},{key:"updateElement",value:function(e){this.element=e}},{key:"clear",value:function(){e.removeListener("mousedown",this.handleMouseDown),e.removeListener("mousemove",this.handleMouseMove),e.removeListener("mouseup",this.handleMouseUp),e.removeListener("touchstart",this.handleTouchStart),e.removeListener("touchmove",this.handleTouchMove),e.removeListener("touchend",this.handleTouchEnd)}}],[{key:"addListener",value:function(e,t){document.addEventListener(e,t)}},{key:"removeListener",value:function(e,t){document.removeEventListener(e,t)}}]),e}(),Jt=function(){function e(t){Object(l.a)(this,e),this.props=void 0,this.element=null,this.eventManager=null,Object(u.n)(this,{},{autoBind:!0}),this.setProps(t.props)}return Object(m.a)(e,[{key:"draggableProps",get:function(){return Object(T.a)({},Object(N.omit)(this.props,["Component","onStartDrag","onMoveDrag","onFinishDrag"]))}},{key:"handleStartDrag",value:function(e,t){var n,i;null===(n=(i=this.props).onStartDrag)||void 0===n||n.call(i,e,t)}},{key:"handleMoveDrag",value:function(e,t){var n,i;null===(n=(i=this.props).onMoveDrag)||void 0===n||n.call(i,e,t)}},{key:"handleFinishDrag",value:function(e,t){var n,i;null===(n=(i=this.props).onFinishDrag)||void 0===n||n.call(i,e,t)}},{key:"setElement",value:function(e){this.element=e,this.eventManager?this.eventManager.updateElement(e):this.eventManager=new Xt({element:e,onStartDrag:this.handleStartDrag,onMoveDrag:this.handleMoveDrag,onFinishDrag:this.handleFinishDrag})}},{key:"setProps",value:function(e){this.props=e}},{key:"clear",value:function(){var e;null===(e=this.eventManager)||void 0===e||e.clear()}}]),e}(),Kt=Object(a.a)(r.a.forwardRef((function(e,t){var n=it(t),i=Object(c.d)((function(){return new Jt({props:e,element:null})})),o=e.Component,s=r.a.useCallback((function(e){e&&(n.current=e,i.setElement(n.current))}),[i,n]);return r.a.useEffect((function(){return i.setProps(e)}),[i,e]),r.a.useEffect((function(){return function(){return i.clear()}}),[i]),Object(V.jsx)(o,Object(T.a)(Object(T.a)({},i.draggableProps),{},{ref:s}))}))),Yt=Object(a.a)((function(e){var t=r.a.useRef(null),n=gt(),i=Object(c.d)((function(){return new Lt({props:e,dragger:n,element:null})})),o=i.draggableProps,s=o.onStartDrag,a=o.onMoveDrag,l=o.onFinishDrag,u=i.elementMoverProps,d=u.Component,h=u.anchor,f=u.componentProps,v=i.model,p=r.a.useCallback((function(e){null!==e&&(i.setElement(e),t.current=e)}),[i]);return r.a.useEffect((function(){return i.setElement(t.current)}),[v,i]),r.a.useEffect((function(){return i.setProps(e)}),[i,e]),Object(V.jsx)(Pt.Provider,{value:i,children:h?Object(V.jsx)(Kt,{ref:p,Component:Zt,onStartDrag:s,onMoveDrag:a,onFinishDrag:l}):Object(V.jsx)(d,Object(T.a)(Object(T.a)({},Object(N.omit)(f,"disabled","bounded","withAnimation","calculationHelper","onMoving","onMovingEnd","componentProps")),{},{ref:t}))})})),Qt=n(18),$t=n(33),en=n.n($t),tn=function(){function e(){Object(l.a)(this,e),this.events=void 0,this.events=new en.a}return Object(m.a)(e,[{key:"on",value:function(e,t){this.events.on(e,t)}},{key:"once",value:function(e,t){this.events.once(e,t)}},{key:"off",value:function(e,t){this.events.off(e,t)}},{key:"removeAllListeners",value:function(e){this.events.removeAllListeners(e)}},{key:"emit",value:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=this.events).emit.apply(t,[e].concat(i))}},{key:"setMaxListeners",value:function(e){this.events.setMaxListeners(e)}}]),e}(),nn="mousedown",rn="mouseenter",on="mouseup",sn="intersectionIn",an="intersectionOut",cn="startDrag",ln="finishDrag",un=st,dn=n(43),hn=n.n(dn),fn=function(){function e(t){var n,i,r;Object(l.a)(this,e),this.duration=void 0,this.shown=void 0,this.shownAnimating=!1,this.onShowingEnd=void 0,this.deferred=null,this.events=void 0,Object(u.n)(this,{},{autoBind:!0}),this.events=new en.a,this.shown=null===(n=null===t||void 0===t?void 0:t.shown)||void 0===n||n,this.duration=null!==(i=null===t||void 0===t?void 0:t.duration)&&void 0!==i?i:500,this.setShowingEndHandler(null!==(r=null===t||void 0===t?void 0:t.onShowingEnd)&&void 0!==r?r:null)}return Object(m.a)(e,[{key:"on",value:function(e,t){this.events.on(e,t)}},{key:"once",value:function(e,t){this.events.on(e,t)}},{key:"off",value:function(e,t){this.events.off(e,t)}},{key:"removeAllListeners",value:function(e){this.events.removeAllListeners(e)}},{key:"setShowingEndHandler",value:function(e){this.onShowingEnd=e}},{key:"startShownAnimating",value:function(){this.shownAnimating=!0}},{key:"finishShownAnimating",value:function(){var e,t;this.shownAnimating=!1,null===(e=this.deferred)||void 0===e||e.resolve(),this.deferred=null,null===(t=this.onShowingEnd)||void 0===t||t.call(this,this.shown),this.events.emit("showing-end",this.shown)}},{key:"startShowing",value:function(){var e;this.shown?null===(e=this.onShowingEnd)||void 0===e||e.call(this,this.shown):(this.shown=!0,this.startShownAnimating(),this.deferred=hn.a.defer(),0===this.duration&&this.finishShownAnimating())}},{key:"startHiding",value:function(){var e;this.shown?(this.shown=!1,this.startShownAnimating(),this.deferred=hn.a.defer(),0===this.duration&&this.finishShownAnimating()):null===(e=this.onShowingEnd)||void 0===e||e.call(this,this.shown)}},{key:"setShown",value:function(e){e?this.startShowing():this.startHiding()}},{key:"show",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shown){e.next=2;break}return e.abrupt("return");case 2:return this.startShowing(),e.next=5,null===(t=this.deferred)||void 0===t?void 0:t.promise;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hide",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.shown){e.next=2;break}return e.abrupt("return");case 2:return this.startHiding(),e.next=5,null===(t=this.deferred)||void 0===t?void 0:t.promise;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setDuration",value:function(e){this.duration=e}},{key:"showInstantly",value:function(){var e=this,t=this.duration;this.setDuration(0),this.show(),Promise.resolve().then((function(){return e.setDuration(t)}))}},{key:"hideInstantly",value:function(){var e=this,t=this.duration;this.setDuration(0),this.hide(),Promise.resolve().then((function(){return e.setDuration(t)}))}},{key:"waitShowing",value:function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.deferred)||void 0===t?void 0:t.promise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),vn=function(){function e(t){var n,i;Object(l.a)(this,e),this.fade=new fn,this.eventEmitter=new tn,this._uid=Object(N.uniqueId)(),this._letter=void 0,this._color=void 0,this._hovered=!1,this._selected=!1,this._disabled=!1,this._dragListening=!1,this._element=null,this._slotId=void 0,this._intersectedSlotId=null,this._group=void 0,Object(u.n)(this,{},{autoBind:!0}),this._letter=t.letter,this._color=null!==(n=t.color)&&void 0!==n?n:un,this._slotId=t.slotId,this._group=null!==(i=t.group)&&void 0!==i?i:Object(N.uniqueId)()}return Object(m.a)(e,[{key:"uid",get:function(){return this._uid}},{key:"group",get:function(){return this._group}},{key:"letter",get:function(){return this._letter}},{key:"color",get:function(){return this._color}},{key:"element",get:function(){return this._element}},{key:"hovered",get:function(){return this._hovered}},{key:"slotId",get:function(){return this._slotId}},{key:"selected",get:function(){return this._selected}},{key:"disabled",get:function(){return this._disabled}},{key:"intersectedSlotId",get:function(){return this._intersectedSlotId}},{key:"dragListening",get:function(){return this._dragListening}},{key:"on",value:function(e,t){this.eventEmitter.on(e,t)}},{key:"once",value:function(e,t){this.eventEmitter.on(e,t)}},{key:"off",value:function(e,t){this.eventEmitter.off(e,t)}},{key:"removeAllListeners",value:function(e){this.eventEmitter.removeAllListeners(e)}},{key:"loadElement",value:function(e){this._element=e}},{key:"setHovered",value:function(e){this._hovered=e}},{key:"setSlotId",value:function(e){this._slotId=e}},{key:"setSelected",value:function(e){this._selected=e}},{key:"setDisabled",value:function(e){this._disabled=e}},{key:"setGroup",value:function(e){this._group=e}},{key:"setIntersectedSlotId",value:function(e){this._intersectedSlotId=e}},{key:"setDragListening",value:function(e){this._dragListening=e}},{key:"handleMouseDown",value:function(){this.eventEmitter.emit(nn)}},{key:"handleMouseEnter",value:function(){this.eventEmitter.emit(rn)}},{key:"handleMouseUp",value:function(){this.eventEmitter.emit(on)}},{key:"handleIntersectionIn",value:function(e){this.eventEmitter.emit(sn,e)}},{key:"handleIntersectionOut",value:function(e){this.eventEmitter.emit(an,e)}},{key:"handleStartDrag",value:function(e,t){this.eventEmitter.emit(cn,e,t)}},{key:"handleFinishDrag",value:function(e,t){this.eventEmitter.emit(ln,e,t)}}]),e}(),pn=function(){function e(t){Object(l.a)(this,e),this._uid=Object(N.uniqueId)(),this._point=void 0,this._hovered=!1,this._element=null,this._cubeId=null,Object(u.n)(this,{},{autoBind:!0}),this._point=t.point}return Object(m.a)(e,[{key:"uid",get:function(){return this._uid}},{key:"element",get:function(){return this._element}},{key:"hovered",get:function(){return this._hovered}},{key:"point",get:function(){return this._point}},{key:"cubeId",get:function(){return this._cubeId}},{key:"loadElement",value:function(e){this._element=e}},{key:"setHovered",value:function(e){this._hovered=e}},{key:"setCubeId",value:function(e){this._cubeId=e}}]),e}(),bn="mouseup",mn=function(){function e(){Object(l.a)(this,e),this.eventEmitter=new tn,this._cells=Object(N.range)(100).map((function(e){var t=Math.sqrt(100);return new pn({point:{x:e%t,y:Math.floor(e/t)}})})),Object(u.n)(this,{},{autoBind:!0})}return Object(m.a)(e,[{key:"cells",get:function(){return this._cells}},{key:"on",value:function(e,t){this.eventEmitter.on(e,t)}},{key:"once",value:function(e,t){this.eventEmitter.on(e,t)}},{key:"off",value:function(e,t){this.eventEmitter.off(e,t)}},{key:"removeAllListeners",value:function(e){this.eventEmitter.removeAllListeners(e)}},{key:"handleMouseUp",value:function(){this.eventEmitter.emit(bn)}}]),e}(),gn="selectedCubesUpdated",jn="selectionEnd",Cn=function(){function e(){Object(l.a)(this,e),this.eventEmitter=new tn,this.field=null,this.cubes=[],this._selectedCubes=[]}return Object(m.a)(e,[{key:"selectedCubes",get:function(){return this._selectedCubes}},{key:"on",value:function(e,t){this.eventEmitter.on(e,t)}},{key:"once",value:function(e,t){this.eventEmitter.on(e,t)}},{key:"off",value:function(e,t){this.eventEmitter.off(e,t)}},{key:"removeAllListeners",value:function(e){this.eventEmitter.removeAllListeners(e)}},{key:"startListening",value:function(e){this.stopListening(),this.cubes=e.cubes,this.field=e.field,this.startCubeMouseDownListeners()}},{key:"stopListening",value:function(){this.stopCubeMouseDownListeners(),this.stopCubeMouseEnterListeners(),this.stopFieldMouseUpListener()}},{key:"startCubeMouseDownListeners",value:function(){var e=this;this.cubes.forEach((function(t){t.on(nn,(function(){e.setSelectedCubes([t]),e.stopCubeMouseDownListeners(),e.startCubeMouseEnterListeners(),e.startFieldMouseUpListener()}))}))}},{key:"stopCubeMouseDownListeners",value:function(){this.cubes.forEach((function(e){return e.removeAllListeners(nn)}))}},{key:"startFieldMouseUpListener",value:function(){var e=this;this.field&&(this.cubes.forEach((function(t){t.on(on,(function(){e.stopCubeMouseEnterListeners(),e.stopFieldMouseUpListener(),e.startCubeMouseDownListeners(),e.eventEmitter.emit(jn,{selectedCubes:e.selectedCubes})}))})),this.field.on(bn,(function(){e.stopCubeMouseEnterListeners(),e.stopFieldMouseUpListener(),e.startCubeMouseDownListeners(),e.eventEmitter.emit(jn,{selectedCubes:e.selectedCubes})})))}},{key:"stopFieldMouseUpListener",value:function(){this.field&&(this.cubes.forEach((function(e){return e.removeAllListeners(on)})),this.field.removeAllListeners(bn))}},{key:"startCubeMouseEnterListeners",value:function(){var e=this;this.cubes.forEach((function(t){t.on(rn,(function(){var n=e.field.cells.find((function(e){return e.uid===t.slotId})),i=e.selectedCubes.slice(-2)[0],r=Object(N.last)(e.selectedCubes),o=e.field.cells.find((function(e){return e.uid===(null===i||void 0===i?void 0:i.slotId)})),s=e.field.cells.find((function(e){return e.uid===r.slotId})),a=e.getNeighborCells(s).find((function(e){return e===n})),c=Object(N.compact)(e.selectedCubes.map((function(t){return e.field.cells.find((function(e){return e.cubeId===t.uid}))})));if(a)if(a===o)e.setSelectedCubes(e.selectedCubes.filter((function(e){return e!==r})));else if(c.includes(a)){if(c.includes(a)){var l=c.indexOf(a);e.setSelectedCubes(e.selectedCubes.slice(0,l+1))}}else e.setSelectedCubes([].concat(Object(Qt.a)(e.selectedCubes),[t]))}))}))}},{key:"stopCubeMouseEnterListeners",value:function(){this.cubes.forEach((function(e){e.removeAllListeners(rn)}))}},{key:"getNeighborCells",value:function(e){return this.field.cells.filter((function(t){return t.point.x===e.point.x-1&&t.point.y===e.point.y||t.point.x===e.point.x&&t.point.y===e.point.y-1||t.point.x===e.point.x+1&&t.point.y===e.point.y||t.point.x===e.point.x&&t.point.y===e.point.y+1}))}},{key:"setSelectedCubes",value:function(e){this._selectedCubes=e,this.eventEmitter.emit(gn,{selectedCubes:this.selectedCubes})}}]),e}(),yn="tick",On=function(){function e(){Object(l.a)(this,e),this.eventEmitter=new tn,this.intervalId=null,this.value=0}return Object(m.a)(e,[{key:"on",value:function(e,t){this.eventEmitter.on(e,t)}},{key:"once",value:function(e,t){this.eventEmitter.on(e,t)}},{key:"off",value:function(e,t){this.eventEmitter.off(e,t)}},{key:"removeAllListeners",value:function(e){this.eventEmitter.removeAllListeners(e)}},{key:"start",value:function(e){var t=this;null===this.intervalId&&(this.intervalId=window.setInterval((function(){t.value+=e,t.eventEmitter.emit(yn,{value:t.value})}),e))}},{key:"stop",value:function(){this.value=0,this.pause()}},{key:"pause",value:function(){this.intervalId&&(window.clearInterval(this.intervalId),this.intervalId=null)}}]),e}(),_n="movingEnd",kn=function(){function e(t){Object(l.a)(this,e),this.anchor=void 0,this.uid=Object(N.uniqueId)(),this.eventEmitter=new tn,Object(u.n)(this,{},{autoBind:!0}),this.anchor=t.anchor}return Object(m.a)(e,[{key:"on",value:function(e,t){this.eventEmitter.on(e,t)}},{key:"once",value:function(e,t){this.eventEmitter.on(e,t)}},{key:"off",value:function(e,t){this.eventEmitter.off(e,t)}},{key:"removeAllListeners",value:function(e){this.eventEmitter.removeAllListeners(e)}},{key:"setAnchor",value:function(e){this.anchor=e}},{key:"handleMovingEnd",value:function(){this.eventEmitter.emit(_n)}}]),e}(),wn=function(){function e(){var t=this;Object(l.a)(this,e),this.progressController=new _,this.popupContinueGame=new C({onClickBreak:function(){return console.log("break")},onClickContinue:function(){return console.log("continue")}}),this.popupResultGame=new j({onClickNewGame:function(){return console.log("break")}}),this.time=0,this.coins=[],this.coinFinishAnchor=null,this._tapeSlots=Object(N.range)(20).map((function(){return{uid:Object(N.uniqueId)()}})),this._cubes=Object(N.flatten)([this.generateFigureCubes(0),this.generateFigureCubes(1),this.generateFigureCubes(2),this.generateFigureCubes(3)]),this._field=new mn,this.selectorHelper=new Cn,this.timer=new On,Object(u.n)(this,{},{autoBind:!0}),this._cubes.forEach((function(e){return t.startDragListeners(e)})),this.selectorHelper.on(gn,(function(e){var n=e.selectedCubes;t._cubes.forEach((function(e){return e.setSelected(!1)})),n.forEach((function(e){return e.setSelected(!0)})),t.timer.pause()})),this.selectorHelper.on(jn,function(){var e=Object(b.a)(p.a.mark((function e(n){var i,r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.selectedCubes,r=i.map((function(e){return e.letter})).join("").toLowerCase(),o=Ft.find((function(e){return e===r})),t.timer.start(1e3),!o){e.next=11;break}return e.next=7,t.launchCoin(i[0].element.parentElement,t.coinFinishAnchor);case 7:t.progressController.collectWord(r),Promise.all(i.map((function(e){return e.fade.hide()}))).then((function(){Object(N.compact)(i.map((function(e){return t.field.cells.find((function(t){return t.uid===e.slotId}))}))).forEach((function(e){return e.setCubeId(null)})),t.setCubes(Object(N.difference)(t._cubes,i))})),e.next=12;break;case 11:i.forEach((function(e){return e.setSelected(!1)}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.timer.on(yn,(function(e){var n=e.value;if(t.setTime(n),15e3===n){t.timer.stop(),t.setTime(0);var i=t._cubes.filter((function(e){return e.dragListening}));Promise.all(i.map(function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setDragListening(!1),e.next=3,t.fade.hide();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(){var e=[].concat(Object(Qt.a)(t.generateFigureCubes(0)),Object(Qt.a)(t.generateFigureCubes(1)),Object(Qt.a)(t.generateFigureCubes(2)),Object(Qt.a)(t.generateFigureCubes(3)));e.forEach((function(e){return e.fade.hideInstantly()})),t.setCubes(Object(N.difference)(t._cubes,i)),t.setCubes([].concat(Object(Qt.a)(t._cubes),Object(Qt.a)(e))),Promise.all(e.map((function(e){return e.fade.show().then((function(){e.setDragListening(!0),t.startDragListeners(e)}))}))).then((function(){t.timer.start(1e3)}))}))}})),this.timer.start(1e3),console.log(this)}return Object(m.a)(e,[{key:"tapeSlots",get:function(){return this._tapeSlots}},{key:"field",get:function(){return this._field}},{key:"cubes",get:function(){return this._cubes}},{key:"setCoinFinishAnchor",value:function(e){this.coinFinishAnchor=e}},{key:"getTapeSlotChunkIndexByTapeSlotUid",value:function(e){return Object(N.chunk)(this.tapeSlots,5).findIndex((function(t){return t.find((function(t){return t.uid===e}))}))}},{key:"generateFigureCubes",value:function(e){var t=Object(N.sample)([1,2,3]),n=1===t?1:2,i=Object(N.range)(n).map((function(){return Object(N.sample)(O.rus)})),r=Object(N.chunk)(this.tapeSlots,5)[e],o=Object(N.uniqueId)(),s=[r[0]];return 2===t&&(s=[r[1],r[2]]),3===t&&(s=[r[3],r[4]]),i.map((function(e,t){var n=rt;return 2===e.score&&(n=ot),3===e.score&&(n=st),4===e.score&&(n=at),5===e.score&&(n=ct),8===e.score&&(n=lt),10===e.score&&(n=ut),new vn({letter:e.letter.toUpperCase(),slotId:s[t].uid,group:o,color:n})}))}},{key:"startDragListeners",value:function(e){var t=this,n=this._cubes.filter((function(t){return t.group===e.group}));e.setDragListening(!0),e.on(cn,(function(){t.timer.pause()})),e.on(sn,(function(i){e.setIntersectedSlotId(i.slotId);var r=Object(N.uniq)(Object(N.compact)(n.map((function(e){return t.field.cells.find((function(t){return t.uid===e.intersectedSlotId&&null===t.cubeId}))}))));r.length===n.length?r.forEach((function(e){return e.setHovered(!0)})):r.forEach((function(e){return e.setHovered(!1)}))})),e.on(an,(function(){n.forEach((function(e){var n=t.field.cells.find((function(t){return t.uid===e.intersectedSlotId}));null===n||void 0===n||n.setHovered(!1)})),e.setIntersectedSlotId(null)})),e.on(ln,(function(){var i=Object(N.uniq)(Object(N.compact)(n.map((function(e){return t.field.cells.find((function(t){return t.uid===e.intersectedSlotId}))})))),r=i.every((function(e){return null===e.cubeId}));if(i.length===n.length&&r){var o=t.getTapeSlotChunkIndexByTapeSlotUid(e.slotId);n.forEach((function(e,n){var r,o;null===(r=i[n])||void 0===r||r.setCubeId(e.uid),null===(o=i[n])||void 0===o||o.setHovered(!1),e.setSlotId(e.intersectedSlotId),e.setIntersectedSlotId(null),t.stopDragListeners(e)})),t.selectorHelper.startListening({cubes:t._cubes.filter((function(e){return!e.dragListening})),field:t._field});var s=t.generateFigureCubes(o);s.forEach((function(e){return e.fade.hideInstantly()})),t._cubes=[].concat(Object(Qt.a)(t._cubes),Object(Qt.a)(s)),s.forEach((function(e){return t.startDragListeners(e)})),Promise.resolve().then((function(){return s.forEach((function(e){return e.fade.show()}))}))}else n.forEach((function(e,t){var n;null===(n=i[t])||void 0===n||n.setCubeId(null),e.setIntersectedSlotId(null)}));t.timer.start(1e3)}))}},{key:"stopDragListeners",value:function(e){e.setDragListening(!1),e.removeAllListeners(sn),e.removeAllListeners(an),e.removeAllListeners(ln)}},{key:"setCubes",value:function(e){this._cubes=e}},{key:"setTime",value:function(e){this.time=e}},{key:"setCoins",value:function(e){this.coins=e}},{key:"launchCoin",value:function(){var e=Object(b.a)(p.a.mark((function e(t,n){var i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new kn({anchor:t}),this.coins.push(i),e.next=4,Promise.resolve();case 4:return i.setAnchor(n),e.next=7,new Promise((function(e){return i.once(_n,e)}));case 7:this.setCoins(this.coins.filter((function(e){return e!==i})));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),xn=n(68),En=["className","style","shown","duration","delay","easing","withUnmount","children","onShowingEnd"],Mn=r.a.forwardRef((function(e,t){var n=e.className,i=e.style,o=e.shown,s=void 0===o||o,a=e.duration,c=void 0===a?500:a,l=e.delay,u=void 0===l?0:l,d=e.easing,h=void 0===d?"ease-in":d,f=e.withUnmount,v=void 0===f||f,p=e.children,b=e.onShowingEnd,m=Object(B.a)(e,En),g=it(t),j=r.a.useMemo((function(){return{entered:{opacity:1},entering:{transition:"opacity ".concat(c,"ms ").concat(u,"ms ").concat(h),opacity:1},exiting:{transition:"opacity ".concat(c,"ms ").concat(u,"ms ").concat(h),opacity:0},exited:{opacity:0}}}),[u,c,h]),C=r.a.useCallback((function(){g.current&&g.current.offsetHeight}),[]),y=r.a.useCallback((function(){null===b||void 0===b||b(s)}),[b,s]);return Object(V.jsx)(xn.a,{nodeRef:g,in:s,timeout:c+u,mountOnEnter:v,unmountOnExit:v,onEnter:C,onEntered:y,onExited:y,children:function(e){return Object(V.jsx)(re,Object(T.a)(Object(T.a)({},m),{},{ref:g,style:"unmounted"!==e?Object(T.a)(Object(T.a)({},i),j[e]):Object(T.a)({},i),className:n,children:p}))}})})),Sn=["title","titleId"];function In(){return In=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},In.apply(this,arguments)}function Dn(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ln(e,t){var n=e.title,r=e.titleId,o=Dn(e,Sn);return i.createElement("svg",In({width:26,height:30,viewBox:"0 0 26 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},o),n?i.createElement("title",{id:r},n):null,ye||(ye=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 17V13C0 5.8203 5.8203 0 13 0C20.1797 0 26 5.8203 26 13V17C26 24.1797 20.1797 30 13 30C5.8203 30 0 24.1797 0 17Z",fill:"#FFC327"})),Oe||(Oe=i.createElement("path",{d:"M18.3266 13.4492H7.67346C7.45397 13.4492 7.27637 13.6269 7.27637 13.8466C7.27637 17.0048 9.84387 19.5744 13 19.5744C16.1562 19.5744 18.7237 17.0048 18.7237 13.8466C18.7237 13.6269 18.5461 13.4492 18.3266 13.4492ZM13 18.7797C10.4155 18.7797 8.28925 16.779 8.08644 14.2439H17.9136C17.7108 16.779 15.5846 18.7797 13 18.7797Z",fill:"black"})),_e||(_e=i.createElement("path",{d:"M13 0C5.83185 0 0 5.83532 0 13.0082V16.9918C0 21.4052 2.20973 25.3096 5.57812 27.6625C5.57829 27.6627 5.57858 27.6628 5.57875 27.663C7.68479 29.1339 10.2426 30 13 30C17.4445 30 21.3737 27.7554 23.7191 24.3409C23.7209 24.3391 23.7217 24.3365 23.7235 24.3347C25.1582 22.2434 26 19.7145 26 16.9918V13.0082C26 5.83532 20.1681 0 13 0ZM2.16421 22.6032C1.36749 21.0691 0.885815 19.3467 0.807604 17.5206C1.15782 18.4651 1.61548 19.3574 2.16421 20.1843V22.6032ZM5.46191 26.5871C4.50091 25.8295 3.65572 24.932 2.95839 23.9237V21.2604C3.68567 22.1449 4.529 22.9294 5.46191 23.5964V26.5871ZM9.06401 28.55C8.06373 28.2079 7.12103 27.7412 6.25608 27.1652V24.1256C7.12983 24.6583 8.07153 25.0894 9.06401 25.4057V28.55ZM12.6029 29.1952C11.6572 29.1647 10.7382 29.0279 9.85819 28.7931V25.6304C10.7411 25.8506 11.6596 25.9782 12.6029 26.0067V29.1952ZM16.1399 28.7936C15.2604 29.0281 14.3421 29.1648 13.3971 29.1952V26.0067C14.3397 25.9782 15.2575 25.8507 16.1399 25.6309V28.7936ZM19.3841 27.3962C18.6192 27.8679 17.7979 28.2554 16.934 28.5506V25.4063C17.793 25.1328 18.6124 24.7707 19.3841 24.3334V27.3962ZM23.0416 23.9237C22.2583 25.0562 21.2892 26.0499 20.1782 26.8612V23.8467C21.2558 23.1297 22.2217 22.2576 23.0416 21.2604V23.9237ZM23.8358 22.6032V20.1843C24.3845 19.3574 24.8422 18.4651 25.1924 17.5206C25.1142 19.3467 24.6325 21.0691 23.8358 22.6032ZM13.0461 25.2209C13.0303 25.219 13.0164 25.2116 13 25.2116C12.9836 25.2116 12.9697 25.219 12.9539 25.2209C6.24479 25.1958 0.794177 19.7275 0.794177 13.0082C0.794177 6.2738 6.26966 0.794702 13 0.794702C19.7303 0.794702 25.2058 6.2738 25.2058 13.0082C25.2058 19.7275 19.7552 25.1958 13.0461 25.2209Z",fill:"black"})),ke||(ke=i.createElement("path",{d:"M13.0003 2.64795C7.29134 2.64795 2.64648 7.29548 2.64648 13.0082C2.64648 18.7209 7.29134 23.3688 13.0003 23.3688C18.7092 23.3688 23.3536 18.7209 23.3536 13.0082C23.3536 7.29548 18.7092 2.64795 13.0003 2.64795ZM13.0003 22.5741C7.72914 22.5741 3.44066 18.2828 3.44066 13.0082C3.44066 7.73358 7.72914 3.44265 13.0003 3.44265C18.2714 3.44265 22.5595 7.73358 22.5595 13.0082C22.5595 18.2828 18.2714 22.5741 13.0003 22.5741Z",fill:"black"})),we||(we=i.createElement("path",{d:"M16.7831 8.74609C15.2048 8.74609 13.9209 10.0309 13.9209 11.6102C13.9209 11.8298 14.0985 12.0076 14.318 12.0076H19.2482C19.4677 12.0076 19.6453 11.8298 19.6453 11.6102C19.6453 10.0309 18.3614 8.74609 16.7831 8.74609ZM14.7535 11.2129C14.9392 10.2614 15.7788 9.5408 16.7831 9.5408C17.7875 9.5408 18.627 10.2614 18.8128 11.2129H14.7535Z",fill:"black"})),xe||(xe=i.createElement("path",{d:"M17.3944 9.97949H16.1705C15.951 9.97949 15.7734 10.1573 15.7734 10.377C15.7734 10.5967 15.951 10.7744 16.1705 10.7744H17.3944C17.6139 10.7744 17.7915 10.5967 17.7915 10.377C17.7915 10.1573 17.6139 9.97949 17.3944 9.97949Z",fill:"black"})),Ee||(Ee=i.createElement("path",{d:"M12.0789 11.6102C12.0789 10.0309 10.795 8.74609 9.21671 8.74609C7.63844 8.74609 6.35449 10.0309 6.35449 11.6102C6.35449 11.8298 6.5321 12.0076 6.75158 12.0076H11.6818C11.9013 12.0076 12.0789 11.8298 12.0789 11.6102ZM7.18706 11.2129C7.37281 10.2614 8.21236 9.5408 9.21671 9.5408C10.2211 9.5408 11.0606 10.2614 11.2464 11.2129H7.18706Z",fill:"black"})),Me||(Me=i.createElement("path",{d:"M9.82894 9.97949H8.6051C8.38561 9.97949 8.20801 10.1573 8.20801 10.377C8.20801 10.5967 8.38561 10.7744 8.6051 10.7744H9.82894C10.0484 10.7744 10.226 10.5967 10.226 10.377C10.226 10.1573 10.0484 9.97949 9.82894 9.97949Z",fill:"black"})))}var Pn=i.forwardRef(Ln),An=(n.p,n(48)),Nn=n.n(An),Fn=["className"],Gn=r.a.forwardRef((function(e,t){var n=e.className,i=Object(B.a)(e,Fn);return Object(V.jsx)("div",Object(T.a)(Object(T.a)({},i),{},{ref:t,className:G()(Nn.a.main,n),children:Object(V.jsx)(Pn,{})}))})),Tn=function(e){var t,n,i,r,o=e.startTranslate,s=e.finishTranslate,a=e.currentTranslate,c=Math.sqrt(Math.pow(o.x-s.x,2)+Math.pow(o.y-s.y,2)),l=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2));return t=o,n=function(e,t,n){var i=t.x-e.x,r=t.y-e.y,o=e.x+.5*i,s=e.y+.5*r,a=Math.atan2(r,i);return{x:o+n*Math.cos(a-Math.PI/2),y:s+n*Math.sin(a-Math.PI/2)}}(o,s,c/2),i=s,r=l/c,{x:Math.pow(1-r,2)*t.x+2*(1-r)*r*n.x+Math.pow(r,2)*i.x,y:Math.pow(1-r,2)*t.y+2*(1-r)*r*n.y+Math.pow(r,2)*i.y}},Bn=Object(a.a)((function(){var e=Object(c.d)((function(){return new wn})),t=r.a.useMemo((function(){return Object(N.chunk)(e.tapeSlots,5)}),[e.tapeSlots]),n=(15e3-e.time)/1e3,i=e.popupContinueGame,o=e.popupResultGame,s=e.progressController;return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(kt,{children:[Object(V.jsxs)("div",{className:$.a.main,children:[Object(V.jsx)("div",{className:$.a.progressContainer,children:Object(V.jsxs)("div",{className:$.a.scoreCounterContainer,children:[Object(V.jsx)(be,{scores:e.progressController.scores}),Object(V.jsx)("div",{ref:e.setCoinFinishAnchor,className:$.a.scoreCoinWrap})]})}),Object(V.jsx)("div",{className:$.a.backButtonContainer,children:Object(V.jsx)(Pe,{onClick:o.show})}),Object(V.jsx)("div",{className:$.a.fieldContainer,children:Object(V.jsx)(Z,{onMouseUp:e.field.handleMouseUp,children:e.field.cells.map((function(e){return Object(V.jsx)(St,{id:e.uid,Component:X,isHovered:e.hovered},e.uid)}))})}),Object(V.jsxs)(Y,{children:[t.map((function(e,t){return Object(V.jsx)("div",{className:$.a.tapeSlotsWrap,children:e.map((function(e,t){return Object(V.jsx)(St,{id:e.uid,Component:bt,className:G()($.a.tapeSlot,$.a["tapeSlot_position_".concat(t+1)])},e.uid)}))},t)})),Object(V.jsx)(Mn,{shown:n<6,duration:200,className:$.a.timer,children:n<6?n:0}),e.cubes.map((function(e){return Object(V.jsx)(Yt,{id:e.uid,disabled:!e.dragListening,slotId:e.slotId,group:e.group,Component:re,afterDragMovingDuration:200,componentProps:{className:$.a.cube,children:Object(V.jsx)(Mn,{ref:function(t){return t&&e.loadElement(t)},duration:200,shown:e.fade.shown,onShowingEnd:e.fade.finishShownAnimating,children:Object(V.jsx)(pt,{color:e.color,selected:e.selected,children:e.letter,onMouseDown:e.handleMouseDown,onMouseEnter:e.handleMouseEnter,onMouseUp:e.handleMouseUp})})},onIntersectionIn:e.handleIntersectionIn,onIntersectionOut:e.handleIntersectionOut,onStartDrag:e.handleStartDrag,onFinishDrag:e.handleFinishDrag},e.uid)}))]})]}),e.coins.map((function(e){return Object(V.jsx)(Ht,{anchor:e.anchor,Component:bt,className:$.a.scoreCoinWrap,calculationHelper:Tn,onMovingEnd:e.handleMovingEnd,children:Object(V.jsx)(Gn,{})},e.uid)}))]}),Object(V.jsx)(Mn,{shown:i.isVisible,onShowingEnd:i.handleTransitionEnd,children:Object(V.jsx)(Ve,{onClickOutside:i.onClickOutside,onClickBreak:i.onClickBreak,onClickContinue:i.onClickContinue})}),Object(V.jsx)(Mn,{shown:o.isVisible,onShowingEnd:o.handleTransitionEnd,children:Object(V.jsx)(nt,{words:s.words,scores:s.scores,onClickOutside:o.onClickOutside,onClickNewGame:o.onClickNewGame})})]})})),Rn=n(49),qn=n.n(Rn),Vn=n(23),Hn=n.n(Vn),Zn=function(e){var t=e.onClickOutside,n=e.onClickSinglePlay,r=e.onClickMultiplPlay,o=Object(tt.g)(),s=Object(i.useCallback)((function(){n(),o("/game")}),[o,n]),a=Object(i.useCallback)((function(){r()}),[r]);return Object(V.jsxs)("div",{className:Hn.a.wrap,children:[Object(V.jsx)("div",{className:Hn.a.overlay,onClick:t}),Object(V.jsx)("div",{className:G()(Hn.a.popup,Hn.a.popup_startGame),children:Object(V.jsxs)("div",{className:Hn.a.buttonsWrap,children:[Object(V.jsx)(Re,{className:Hn.a.btn,onClick:s,children:"\u0418\u0433\u0440\u0430\u0442\u044c \u043e\u0434\u043d\u043e\u043c\u0443"}),Object(V.jsx)(Re,{className:Hn.a.btn,onClick:a,children:"\u0418\u0433\u0440\u0430\u0442\u044c \u0441 \u0441\u043e\u043f\u0435\u0440\u043d\u0438\u043a\u043e\u043c"})]})})]})},Wn=Object(a.a)((function(){var e=function(){var e=Object(i.useContext)(w);if(null===e)throw new Error("Hook must be called inside AppStore.Provider");return e}(),t=e.handleGameStartClick,n=e.popupStartGame,r=Object(tt.g)(),o=Object(i.useCallback)((function(){t(),r("game")}),[t,r]);return Object(V.jsx)("div",{className:qn.a.main,children:Object(V.jsx)(Zn,{onClickSinglePlay:o,onClickMultiplPlay:n.onClickMultiplePlay,onClickOutside:n.onClickOutside})})})),Un=(n(63),n(64),n(32)),zn=n(44),Xn=n.n(zn);function Jn(e){var t=e.children;return Object(V.jsx)("div",{className:Xn.a.main,children:Object(V.jsx)("div",{className:Xn.a.content,children:t})})}var Kn=w.Provider,Yn=Object(a.a)((function(){var e=Object(c.d)((function(){return new k}));return Object(V.jsx)(Kn,{value:e,children:Object(V.jsx)(Un.a,{basename:"/tetris-words",children:Object(V.jsx)(Jn,{children:Object(V.jsxs)(tt.d,{children:[Object(V.jsx)(tt.b,{path:"/",element:Object(V.jsx)(Wn,{})}),e.isVisibleGamePage&&Object(V.jsx)(tt.b,{path:"/game",element:Object(V.jsx)(Bn,{})}),Object(V.jsx)(tt.b,{path:"/game",element:Object(V.jsx)(tt.a,{to:"/"})})]})})})})})),Qn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),i(e),r(e),o(e),s(e)}))};s.a.render(Object(V.jsx)(Yn,{}),document.getElementById("root")),Qn()}],[[65,1,2]]]);
//# sourceMappingURL=main.5e5ef71b.chunk.js.map