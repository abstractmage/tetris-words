(this["webpackJsonptetris-words"]=this["webpackJsonptetris-words"]||[]).push([[0],{15:function(e,t,n){e.exports={main:"GamePage_main__17VmN",progressContainer:"GamePage_progressContainer__3SUd1",backButtonContainer:"GamePage_backButtonContainer__1TsCh",scoreCounterContainer:"GamePage_scoreCounterContainer__3xbxZ",fieldContainer:"GamePage_fieldContainer__GK9s9",tapeSlotsWrap:"GamePage_tapeSlotsWrap__1EnLm",tapeSlot:"GamePage_tapeSlot__3Uhmr",tapeSlot_position_1:"GamePage_tapeSlot_position_1__2G08b",tapeSlot_position_2:"GamePage_tapeSlot_position_2__20rZ1",tapeSlot_position_3:"GamePage_tapeSlot_position_3__PqwEF",tapeSlot_position_4:"GamePage_tapeSlot_position_4__1A40A",tapeSlot_position_5:"GamePage_tapeSlot_position_5__3Kxfe",timer:"GamePage_timer__1Mv79"}},18:function(e,t,n){e.exports={main:"Cube_main__hJP24",main_disabled:"Cube_main_disabled__2nnek",main_hoverable:"Cube_main_hoverable__3pwki",main_hovered:"Cube_main_hovered__16O4D",main_selected:"Cube_main_selected__16Uy4",scaleWrap:"Cube_scaleWrap__2GxKq",background:"Cube_background__1XBLx",content:"Cube_content__29hV2"}},23:function(e,t,n){e.exports={main:"StartPage_main__3BRSA",header:"StartPage_header__3kki8",content:"StartPage_content__20Z1Z",playButton:"StartPage_playButton__3zTvQ"}},28:function(e,t,n){e.exports={field:"Field_field__3_I7N",field_disabled:"Field_field_disabled__TjW7U",cells:"Field_cells__18mqT"}},31:function(e,t,n){e.exports={cell:"Cell_cell__1-e6R",cell_hovered:"Cell_cell_hovered__unFKJ"}},32:function(e,t,n){e.exports={main:"Tape_main__3GNJ6",slotsContainer:"Tape_slotsContainer__1Pc-P"}},33:function(e,t,n){e.exports={main:"FullSizeBlock_main__1gNfp",main_absolute:"FullSizeBlock_main_absolute__2wbtO"}},34:function(e,t,n){e.exports={main:"ScoreCounter_main__xe56H",scores:"ScoreCounter_scores__EcP3h"}},35:function(e,t,n){e.exports={main:"BackButton_main__3qz2x",main_disabled:"BackButton_main_disabled__L6IGz"}},37:function(e,t,n){e.exports={main:"Main_main__3hbzX",content:"Main_content__Z3Lrs"}},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(16),s=n.n(o),a=n(9),l=n(10),c=n(4),u=n(1),d=function e(){var t=this;Object(c.a)(this,e),this.figures=[{blocks:[{color:"#FF7B1C",letter:"\u0410"}],type:1},{blocks:[{color:"#A258FF",letter:"\u0416"},{color:"#FF7B1C",letter:"\u0410"}],type:2},{blocks:[{color:"#FF7B1C",letter:"\u0420"}],type:1},{blocks:[{color:"#FF7B1C",letter:"\u0410"},{color:"#FF7B1C",letter:"\u0421"}],type:3},{blocks:[{color:"#0ABA9A",letter:"\u0410"}],type:1},{blocks:[{color:"#D73A8F",letter:"\u0424"}],type:1}],this.setFigures=function(e){t.figures=e},Object(u.n)(this)},h=n(5),f={rus:[{letter:"\u0430",score:1},{letter:"\u0431",score:3},{letter:"\u0432",score:1},{letter:"\u0433",score:3},{letter:"\u0434",score:2},{letter:"\u0435",score:1},{letter:"\u0451",score:3},{letter:"\u0436",score:5},{letter:"\u0437",score:5},{letter:"\u0438",score:1},{letter:"\u0439",score:4},{letter:"\u043a",score:2},{letter:"\u043b",score:2},{letter:"\u043c",score:2},{letter:"\u043d",score:1},{letter:"\u043e",score:1},{letter:"\u043f",score:2},{letter:"\u0440",score:1},{letter:"\u0441",score:1},{letter:"\u0442",score:1},{letter:"\u0443",score:2},{letter:"\u0444",score:10},{letter:"\u0445",score:5},{letter:"\u0446",score:5},{letter:"\u0447",score:5},{letter:"\u0448",score:8},{letter:"\u0449",score:10},{letter:"\u044a",score:10},{letter:"\u044b",score:4},{letter:"\u044c",score:3},{letter:"\u044d",score:8},{letter:"\u044e",score:8},{letter:"\u044f",score:3}]},v=(f.rus.map((function(e){return e.letter})),function(){function e(){Object(c.a)(this,e),this._words=[],this._scores=0,Object(u.n)(this,{},{autoBind:!0})}return Object(h.a)(e,[{key:"collectWord",value:function(e){this._words.push(e);var t=this._getWordScores(e);t&&(this._scores+=t)}},{key:"_getWordScores",value:function(e){try{return e.split("").reduce((function(t,n,i,r){var o,s=null===(o=f.rus.find((function(e){return e.letter===n})))||void 0===o?void 0:o.score;if(!s)throw new Error("\u0432 \u0441\u043b\u043e\u0432\u0435 ".concat(e," \u0434\u043b\u044f \u0431\u0443\u043a\u0432\u044b ").concat(n," \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u044b \u043e\u0447\u043a\u0438 \u0432 letterDistributions"));return t+=s}),0)}catch(t){console.warn(t)}}},{key:"words",get:function(){return this._words}},{key:"scores",get:function(){return this._scores}}]),e}()),p=function e(){var t=this;Object(c.a)(this,e),this.tape=new d,this.progressController=new v,this.isVisibleGamePage=!1,this.handleGameStartClick=function(){t.isVisibleGamePage=!0,console.log("handleGameStartClick")},Object(u.n)(this)},b=Object(i.createContext)(null);b.displayName="AppContext";var m,g,j,y,O,k,_,C,E,w=n(7),x=n(11),S=n.n(x),I=n(3),M=n(8),D=n(28),L=n.n(D),A=n(2),F=["isDisabled","children"],P=function(e){var t=e.isDisabled,n=e.children,i=Object(M.a)(e,F);return Object(A.jsx)("div",Object(I.a)(Object(I.a)({},i),{},{className:S()(L.a.field,t&&L.a.field_disabled),children:Object(A.jsx)("div",{className:L.a.cells,children:n})}))},B=n(31),T=n.n(B),N=["isHovered","children"],H=r.a.forwardRef((function(e,t){var n=e.isHovered,i=void 0!==n&&n,r=(e.children,Object(M.a)(e,N));return Object(A.jsx)("div",Object(I.a)(Object(I.a)({ref:t},r),{},{className:S()(T.a.cell,i&&T.a.cell_hovered)}))})),R=n(32),U=n.n(R),G=function(e){var t=e.children;return Object(A.jsx)("div",{className:U.a.main,children:Object(A.jsx)("div",{className:U.a.slotsContainer,children:t})})},Z=n(15),V=n.n(Z),W=n(12),q=n(33),z=n.n(q),J=["className","absolute"],K=r.a.forwardRef((function(e,t){var n=e.className,i=e.absolute,r=void 0!==i&&i,o=Object(M.a)(e,J);return Object(A.jsx)("div",Object(I.a)(Object(I.a)({},o),{},{ref:t,className:S()(z.a.main,r&&z.a.main_absolute,n)}))})),X=["title","titleId"];function Q(){return Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Q.apply(this,arguments)}function Y(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $(e,t){var n=e.title,r=e.titleId,o=Y(e,X);return i.createElement("svg",Q({width:103,height:103,viewBox:"0 0 103 103",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},o),n?i.createElement("title",{id:r},n):null,i.createElement("mask",{id:"mask0_0_1",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:103,height:103},m||(m=i.createElement("rect",{width:103,height:103,rx:34,fill:"#C4C4C4"}))),g||(g=i.createElement("g",{mask:"url(#mask0_0_1)"},i.createElement("rect",{width:103,height:103,fill:"#FFC327"}))),j||(j=i.createElement("path",{d:"M63.9968 47.3813H39.0029C38.488 47.3813 38.0713 47.796 38.0713 48.3085C38.0713 55.6777 44.095 61.6734 51.4999 61.6734C58.9047 61.6734 64.9285 55.6777 64.9285 48.3085C64.9285 47.796 64.5118 47.3813 63.9968 47.3813ZM51.4999 59.8191C45.4361 59.8191 40.4477 55.1508 39.9719 49.2357H63.0279C62.5521 55.1508 57.5637 59.8191 51.4999 59.8191Z",fill:"black"})),y||(y=i.createElement("path",{d:"M51.5 16C34.6824 16 21 29.6157 21 46.3525V55.6475C21 65.9454 26.1844 75.0557 34.0871 80.5459C34.0875 80.5462 34.0882 80.5465 34.0886 80.5469C39.0297 83.9792 45.0306 86 51.5 86C61.9275 86 71.146 80.7627 76.6488 72.7953C76.653 72.7911 76.6548 72.7852 76.659 72.781C80.025 67.9013 82 62.0006 82 55.6475V46.3525C82 29.6157 68.3176 16 51.5 16ZM26.0776 68.7407C24.2083 65.1611 23.0783 61.1424 22.8948 56.8814C23.7164 59.0851 24.7902 61.1672 26.0776 63.0967V68.7407ZM33.8145 78.0365C31.5598 76.2689 29.5769 74.1747 27.9408 71.8219V65.6075C29.6472 67.6715 31.6257 69.502 33.8145 71.0583V78.0365ZM42.2656 82.6166C39.9188 81.8185 37.707 80.7294 35.6777 79.3854V72.2931C37.7277 73.5361 39.9371 74.542 42.2656 75.2799V82.6166ZM50.5684 84.1222C48.3497 84.0511 46.1936 83.7317 44.1288 83.1838V75.8044C46.2003 76.3181 48.3553 76.6158 50.5684 76.6823V84.1222ZM58.8666 83.1851C56.8033 83.7323 54.6487 84.0511 52.4316 84.1222V76.6823C54.6431 76.6158 56.7965 76.3184 58.8666 75.8054V83.1851ZM66.478 79.9246C64.6834 81.0251 62.7566 81.9293 60.7299 82.6181V75.2814C62.7452 74.6432 64.6675 73.7984 66.478 72.778V79.9246ZM75.0592 71.8219C73.2215 74.4646 70.9478 76.7831 68.3412 78.6762V71.6424C70.8694 69.9693 73.1355 67.9344 75.0592 65.6075V71.8219ZM76.9224 68.7407V63.0967C78.2098 61.1672 79.2836 59.0851 80.1052 56.8814C79.9217 61.1424 78.7917 65.1611 76.9224 68.7407ZM51.6083 74.8488C51.5711 74.8444 51.5384 74.8271 51.5 74.8271C51.4616 74.8271 51.429 74.8444 51.3918 74.8488C35.6512 74.7902 22.8633 62.0309 22.8633 46.3525C22.8633 30.6389 35.7096 17.8543 51.5 17.8543C67.2904 17.8543 80.1367 30.6389 80.1367 46.3525C80.1367 62.0309 67.3488 74.7902 51.6083 74.8488Z",fill:"black"})),O||(O=i.createElement("path",{d:"M51.5005 22.1787C38.1065 22.1787 27.209 33.023 27.209 46.3526C27.209 59.6822 38.1065 70.5274 51.5005 70.5274C64.8946 70.5274 75.7912 59.6822 75.7912 46.3526C75.7912 33.023 64.8946 22.1787 51.5005 22.1787ZM51.5005 68.673C39.1337 68.673 29.0722 58.66 29.0722 46.3526C29.0722 34.0452 39.1337 24.033 51.5005 24.033C63.8674 24.033 73.9279 34.0452 73.9279 46.3526C73.9279 58.66 63.8674 68.673 51.5005 68.673Z",fill:"black"})),k||(k=i.createElement("path",{d:"M60.3763 36.4072C56.6735 36.4072 53.6611 39.4051 53.6611 43.0901C53.6611 43.6026 54.0778 44.0173 54.5928 44.0173H66.1599C66.6749 44.0173 67.0915 43.6026 67.0915 43.0901C67.0915 39.4051 64.0792 36.4072 60.3763 36.4072ZM55.6145 42.163C56.0503 39.9429 58.02 38.2615 60.3763 38.2615C62.7327 38.2615 64.7024 39.9429 65.1382 42.163H55.6145Z",fill:"black"})),_||(_=i.createElement("path",{d:"M61.8117 39.2856H58.9404C58.4255 39.2856 58.0088 39.7004 58.0088 40.2131C58.0088 40.7257 58.4255 41.1405 58.9404 41.1405H61.8117C62.3267 41.1405 62.7434 40.7257 62.7434 40.2131C62.7434 39.7004 62.3267 39.2856 61.8117 39.2856Z",fill:"black"})),C||(C=i.createElement("path",{d:"M49.3396 43.0901C49.3396 39.4051 46.3273 36.4072 42.6244 36.4072C38.9215 36.4072 35.9092 39.4051 35.9092 43.0901C35.9092 43.6026 36.3259 44.0173 36.8408 44.0173H48.408C48.9229 44.0173 49.3396 43.6026 49.3396 43.0901ZM37.8625 42.163C38.2983 39.9429 40.268 38.2615 42.6244 38.2615C44.9808 38.2615 46.9505 39.9429 47.3863 42.163H37.8625Z",fill:"black"})),E||(E=i.createElement("path",{d:"M44.0598 39.2856H41.1885C40.6735 39.2856 40.2568 39.7004 40.2568 40.2131C40.2568 40.7257 40.6735 41.1405 41.1885 41.1405H44.0598C44.5747 41.1405 44.9914 40.7257 44.9914 40.2131C44.9914 39.7004 44.5747 39.2856 44.0598 39.2856Z",fill:"black"})))}var ee,te,ne=i.forwardRef($),ie=(n.p,{scores:0}),re=n(34),oe=n.n(re),se=["className","scores"],ae=function(e){var t=Object(I.a)(Object(I.a)({},ie),e),n=(t.className,t.scores),i=Object(M.a)(t,se),o=r.a.useRef(null),s=r.a.useState(null),a=Object(W.a)(s,2),l=a[0],c=a[1],u=l?l/120:1,d=r.a.useMemo((function(){return{fontSize:"".concat(20*u,"px")}}),[u]);return r.a.useEffect((function(){var e=o.current,t=function(){return c(e.offsetWidth)};return t(),window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),Object(A.jsxs)(K,Object(I.a)(Object(I.a)({},i),{},{ref:o,className:S()(oe.a.main),children:[Object(A.jsx)(K,{absolute:!0,children:Object(A.jsx)(ne,{})}),Object(A.jsx)("div",{style:d,className:oe.a.scores,children:n})]}))},le=["title","titleId"];function ce(){return ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ce.apply(this,arguments)}function ue(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function de(e,t){var n=e.title,r=e.titleId,o=ue(e,le);return i.createElement("svg",ce({width:80,height:80,viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},o),n?i.createElement("title",{id:r},n):null,ee||(ee=i.createElement("path",{d:"M62 17L17 62",stroke:"white",strokeWidth:6,strokeLinecap:"round"})),te||(te=i.createElement("path",{d:"M17 17L62 62",stroke:"white",strokeWidth:6,strokeLinecap:"round"})))}var he=i.forwardRef(de),fe=(n.p,n(35)),ve=n.n(fe),pe=["className","disabled","style"],be=function(e){var t=e.className,n=e.disabled,i=e.style,o=Object(M.a)(e,pe),s=r.a.useRef(null),a=r.a.useState(null),l=Object(W.a)(a,2),c=l[0],u=l[1],d=c?c/80:1,h=r.a.useMemo((function(){return Object(I.a)(Object(I.a)({},i),{},{borderWidth:"".concat(7*d,"px")})}),[d,i]);return r.a.useEffect((function(){var e=s.current,t=function(){return u(e.offsetWidth)};return t(),window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),Object(A.jsx)(K,Object(I.a)(Object(I.a)({},o),{},{ref:s,style:h,className:S()(ve.a.main,n&&ve.a.main_disabled,t),children:Object(A.jsx)(he,{})}))},me=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=r.a.useRef();return r.a.useEffect((function(){t.forEach((function(e){e&&("function"===typeof e?e(i.current||null):e.current=i.current||null)}))}),[t]),i},ge="#FF7B1C",je="#545AEF",ye="#0ABA9A",Oe="#FFDC27",ke="#A258FF",_e="#18C2E8",Ce="#D73A8F",Ee={color:ye,disabled:!1,hovered:!1,selected:!1,hoverable:!1},we=n(18),xe=n.n(we),Se=["color","children","className","disabled","selected","hovered","hoverable","style"],Ie=r.a.forwardRef((function(e,t){var n=Object(I.a)(Object(I.a)({},Ee),e),i=n.color,o=n.children,s=n.className,a=n.disabled,l=n.selected,c=n.hovered,u=n.hoverable,d=n.style,h=Object(M.a)(n,Se),f=me(t),v=r.a.useState(null),p=Object(W.a)(v,2),b=p[0],m=p[1],g=b?b/50:1,j=r.a.useMemo((function(){return Object(I.a)(Object(I.a)({},d),{},{fontSize:"".concat(28*g,"px")})}),[g,d]);return r.a.useEffect((function(){var e=f.current,t=function(){return m(e.offsetWidth)};return t(),window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[f]),Object(A.jsx)(K,Object(I.a)(Object(I.a)({},h),{},{ref:f,style:j,className:S()(xe.a.main,l&&xe.a.main_selected,u&&xe.a.main_hoverable,c&&xe.a.main_hovered,a&&xe.a.main_disabled,s),children:Object(A.jsxs)(K,{className:xe.a.scaleWrap,children:[Object(A.jsx)(K,{className:xe.a.background,style:{backgroundColor:i,boxShadow:"".concat(2*g,"px ").concat(2*g,"px ").concat(2*g,"px rgba(34, 0, 135, 0.25)")},absolute:!0}),Object(A.jsx)(K,{className:xe.a.content,absolute:!0,children:o})]})}))})),Me=r.a.forwardRef((function(e,t){return Object(A.jsx)("div",Object(I.a)({ref:t},e))})),De=r.a.createContext(null),Le=function(){var e=r.a.useContext(De);if(!e)throw new Error("DraggerStoreContext value was not provided");return e},Ae=function(){function e(){Object(c.a)(this,e),this.items=[],Object(u.n)(this,{},{autoBind:!0})}return Object(h.a)(e,[{key:"findById",value:function(e){return this.items.find((function(t){return t.id===e}))}},{key:"findByElement",value:function(e){return this.items.find((function(t){return t.element===e}))}},{key:"add",value:function(e){var t=this;return Object(u.r)((function(){t.items=t.items.concat(e)})),e}}]),e}(),Fe=function(e,t){var n=e.getBoundingClientRect(),i=t.getBoundingClientRect();return{left:i.left-n.left,top:i.top-n.top}},Pe=function(){function e(){Object(c.a)(this,e),this.data=null}return Object(h.a)(e,[{key:"calculateIntersectedElements",value:function(t,n){var i=e.getIntersectionData(t,n).filter((function(e){return 0!==e.area})),r=null,o=null;return null!==this.data&&0!==this.data.length&&(r=this.data.reduce((function(e,t){return e.area>t.area?e:t}))),this.data=i,null!==this.data&&0!==this.data.length&&(o=this.data.reduce((function(e,t){return e.area>t.area?e:t}))),{prev:r,current:o}}},{key:"clearIntersection",value:function(){this.data=null}}],[{key:"getIntersectionArea",value:function(e,t){var n=0,i=0,r=e.getBoundingClientRect(),o=t.getBoundingClientRect(),s=Math.max(r.x+r.width,o.x+o.width)-Math.min(r.x,o.x),a=r.width+o.width,l=Math.max(r.y+r.height,o.y+o.height)-Math.min(r.y,o.y),c=r.height+o.height;return s<=a&&(i=a-s),l<=c&&(n=c-l),i*n}},{key:"getIntersectionData",value:function(e,t){var n=this;return t.map((function(t,i){return{index:i,element:t,area:n.getIntersectionArea(e,t)}}))}}]),e}(),Be=function(){function e(t){Object(c.a)(this,e),this.intersectionCalculators=[],this.plates=void 0,this.slots=void 0,Object(u.n)(this,{},{autoBind:!0}),this.plates=t.plates,this.slots=t.slots}return Object(h.a)(e,[{key:"platesInDrag",get:function(){return this.plates.items.filter((function(e){return e.inDrag}))}},{key:"inDrag",get:function(){return!!this.platesInDrag}},{key:"assertDragStarted",value:function(){if(!this.inDrag)throw new Error("".concat(this.constructor.name,": drag was not started"))}},{key:"startDrag",value:function(e){var t=this,n=e.event,i=e.data,r=this.plates.findByElement(i.element);if(!r.disabled){var o=this.slots.findById(r.slotId),s=Fe(o.element,r.element);(r.group?this.plates.items.filter((function(e){return e.group===r.group})):[r]).forEach((function(e){var r,o;t.intersectionCalculators.push(new Pe);var a={x:s.left,y:s.top};if(e.centered){var l=i.element.getBoundingClientRect();a.x=i.point.x-l.x-l.width/2,a.y=i.point.y-l.y-l.height/2}e.startDrag(),e.setTranslate(a),null===(r=e.callbacks)||void 0===r||null===(o=r.onStartDrag)||void 0===o||o.call(r,n,i)}))}}},{key:"moveDrag",value:function(e){var t=this,n=e.event,i=e.data;this.assertDragStarted(),this.platesInDrag.forEach((function(e,r){var o,s;e.setTranslate({x:e.translate.x+i.deltaPoint.x,y:e.translate.y+i.deltaPoint.y}),null===(o=e.callbacks)||void 0===o||null===(s=o.onMoveDrag)||void 0===s||s.call(o,n,i);var a=t.intersectionCalculators[r].calculateIntersectedElements(e.intersectionElement,t.slots.items.map((function(e){return e.intersectionElement}))),l=a.prev,c=a.current,u=c?t.slots.items[c.index]:null,d=l?t.slots.items[l.index]:null;if(!u&&d){var h,f,v,p,b={plateId:e.id,slotId:d.id};null===(h=e.callbacks)||void 0===h||null===(f=h.onIntersectionOut)||void 0===f||f.call(h,b),null===(v=d.callbacks)||void 0===v||null===(p=v.onIntersectionOut)||void 0===p||p.call(v,b)}else if(u&&!d){var m,g,j,y,O={plateId:e.id,slotId:u.id};null===(m=e.callbacks)||void 0===m||null===(g=m.onIntersectionIn)||void 0===g||g.call(m,O),null===(j=u.callbacks)||void 0===j||null===(y=j.onIntersectionIn)||void 0===y||y.call(j,O)}else if(u&&d&&u.id!==d.id){var k,_,C,E,w,x,S,I;null===(k=e.callbacks)||void 0===k||null===(_=k.onIntersectionOut)||void 0===_||_.call(k,{plateId:e.id,slotId:d.id}),null===(C=d.callbacks)||void 0===C||null===(E=C.onIntersectionOut)||void 0===E||E.call(C,{plateId:e.id,slotId:d.id}),null===(w=e.callbacks)||void 0===w||null===(x=w.onIntersectionIn)||void 0===x||x.call(w,{plateId:e.id,slotId:u.id}),null===(S=u.callbacks)||void 0===S||null===(I=S.onIntersectionIn)||void 0===I||I.call(S,{plateId:e.id,slotId:u.id})}}))}},{key:"finishDrag",value:function(e){var t=e.event,n=e.data;this.assertDragStarted(),this.intersectionCalculators=[],this.platesInDrag.forEach((function(e){var i,r;e.finishDrag(),null===(i=e.callbacks)||void 0===i||null===(r=i.onFinishDrag)||void 0===r||r.call(i,t,n)}))}}]),e}(),Te=function e(){Object(c.a)(this,e),this.plates=new Ae,this.slots=new Ae,this.operator=new Be({plates:this.plates,slots:this.slots}),Object(u.n)(this,{},{autoBind:!0})},Ne=function(e){var t=e.children,n=Object(l.d)((function(){return new Te}));return Object(A.jsx)(De.Provider,{value:n,children:t})},He=n(20),Re=n(27),Ue=n(26),Ge=function(){function e(t){Object(c.a)(this,e),this.id=void 0,this.element=null,Object(u.o)(this,{element:u.p,setElement:u.f.bound}),this.id=t.id}return Object(h.a)(e,[{key:"setElement",value:function(e){this.element=e}}]),e}(),Ze=function(e){Object(Re.a)(n,e);var t=Object(Ue.a)(n);function n(e){var i,r,o;return Object(c.a)(this,n),(o=t.call(this,e)).elementSelector=void 0,o.intersectionSelector=void 0,o.callbacks=void 0,Object(u.o)(Object(He.a)(o),{callbacks:u.p,intersectionElement:u.g,currentElement:u.g,setCallbacks:u.f.bound}),o.elementSelector=null!==(i=e.elementSelector)&&void 0!==i?i:null,o.intersectionSelector=null!==(r=e.intersectionSelector)&&void 0!==r?r:null,o.callbacks=e.callbacks,o}return Object(h.a)(n,[{key:"intersectionElement",get:function(){var e;if(!this.intersectionSelector)return this.element;var t=null===(e=this.element)||void 0===e?void 0:e.querySelector(this.intersectionSelector);return t||this.element}},{key:"currentElement",get:function(){var e;if(!this.elementSelector)return this.element;var t=null===(e=this.element)||void 0===e?void 0:e.querySelector(this.elementSelector);return t||t}},{key:"setCallbacks",value:function(e){this.callbacks=e}}]),n}(Ge),Ve=["Component","id","intersectionSelector","elementSelector","onIntersectionIn","onIntersectionOut"],We=Object(a.a)((function(e){var t=e.Component,n=e.id,i=e.intersectionSelector,o=e.elementSelector,s=e.onIntersectionIn,a=e.onIntersectionOut,l=Object(M.a)(e,Ve),c=r.a.useRef(null),u=Le(),d=r.a.useMemo((function(){return u.slots.add(new Ze({id:n,intersectionSelector:i,elementSelector:o,callbacks:{onIntersectionIn:s,onIntersectionOut:a}}))}),[u.slots,o,n,i,s,a]);return r.a.useEffect((function(){d.setElement(c.current)}),[d]),r.a.useEffect((function(){d.setCallbacks({onIntersectionIn:s,onIntersectionOut:a})}),[s,a,d]),Object(A.jsx)(t,Object(I.a)(Object(I.a)({},l),{},{ref:c}))})),qe=function(e){Object(Re.a)(n,e);var t=Object(Ue.a)(n);function n(e){var i,r,o;return Object(c.a)(this,n),(o=t.call(this,e)).translate={x:0,y:0},o.slotId=void 0,o.inDrag=!1,o.centered=void 0,o.group=void 0,o.intersectionSelector=void 0,o.disabled=!1,o.callbacks=void 0,Object(u.o)(Object(He.a)(o),{translate:u.p,slotId:u.p,inDrag:u.p,group:u.p,disabled:u.p,intersectionElement:u.g,startDrag:u.f.bound,finishDrag:u.f.bound,setTranslate:u.f.bound,setSlotId:u.f.bound}),o.slotId=e.slotId,o.disabled=null!==(i=e.disabled)&&void 0!==i&&i,o.group=e.group,o.centered=e.centered,o.intersectionSelector=null!==(r=e.intersectionSelector)&&void 0!==r?r:null,o.callbacks=e.callbacks,o}return Object(h.a)(n,[{key:"intersectionElement",get:function(){var e;if(!this.intersectionSelector)return this.element;var t=null===(e=this.element)||void 0===e?void 0:e.querySelector(this.intersectionSelector);return t||this.element}},{key:"setCallbacks",value:function(e){this.callbacks=e}},{key:"startDrag",value:function(){this.inDrag=!0}},{key:"finishDrag",value:function(){this.inDrag=!1}},{key:"setTranslate",value:function(e){this.translate=e}},{key:"setSlotId",value:function(e){this.slotId=e}},{key:"setDisabled",value:function(e){this.disabled=e}}]),n}(Ge),ze=function(){function e(t){var n=t.expression,i=t.handler,r=t.options;Object(c.a)(this,e),this.disposer=null,this.expression=void 0,this.handler=void 0,this.options=void 0,this.expression=n,this.handler=i,this.options=r,this.handle=this.handle.bind(this)}return Object(h.a)(e,[{key:"init",value:function(){this.disposer=Object(u.q)(this.expression,this.handle,this.options)}},{key:"dispose",value:function(){var e;null===(e=this.disposer)||void 0===e||e.call(this),this.disposer=null}},{key:"handle",value:function(e,t,n){try{this.handler(e,t,n)}catch(i){throw window.dispatchEvent(new ErrorEvent("error",i)),i}}}]),e}(),Je=function(){function e(t){var n=this;Object(c.a)(this,e),this.props=void 0,this.plateModel=void 0,this.reactions={slotId:new ze({expression:function(){return n.props.slotId},handler:function(e){return n.model.setSlotId(e)}}),callbacks:new ze({expression:function(){var e=n.props;return{onAfterDragMoving:e.onAfterDragMoving,onAfterDragMovingEnd:e.onAfterDragMovingEnd,onStartDrag:e.onStartDrag,onMoveDrag:e.onMoveDrag,onFinishDrag:e.onFinishDrag,onIntersectionIn:e.onIntersectionIn,onIntersectionOut:e.onIntersectionOut}},handler:function(e){n.model.setCallbacks(e)}})},this.dragger=void 0,this.element=null,Object(u.n)(this,{props:u.p.shallow},{autoBind:!0}),this.initReactions(),this.element=t.element,this.dragger=t.dragger,this.setProps(t.props),this.plateModel=this.dragger.plates.add(new qe({id:this.props.id,slotId:this.props.slotId,centered:this.props.centered,group:this.props.group,disabled:this.props.disabled,intersectionSelector:this.props.intersectionSelector,callbacks:{onAfterDragMoving:this.props.onAfterDragMoving,onAfterDragMovingEnd:this.props.onAfterDragMovingEnd,onStartDrag:this.props.onStartDrag,onMoveDrag:this.props.onMoveDrag,onFinishDrag:this.props.onFinishDrag,onIntersectionIn:this.props.onIntersectionIn,onIntersectionOut:this.props.onIntersectionOut}}))}return Object(h.a)(e,[{key:"model",get:function(){return this.dragger.plates.findById(this.props.id)}},{key:"slot",get:function(){return this.dragger.slots.findById(this.model.slotId)}},{key:"draggableProps",get:function(){var e=this;return{onStartDrag:function(t,n){e.dragger.operator.startDrag({event:t,data:n})},onMoveDrag:function(t,n){e.dragger.operator.moveDrag({event:t,data:n})},onFinishDrag:function(t,n){e.dragger.operator.finishDrag({event:t,data:n})}}}},{key:"elementMoverProps",get:function(){var e,t,n,i;return Object(I.a)({Component:this.props.Component,anchor:null===(e=this.slot)||void 0===e?void 0:e.currentElement,translate:this.model.translate,bounded:"default"===this.props.state?!this.model.inDrag:"bounded"===this.props.state,duration:null!==(t=this.props.afterDragMovingDuration)&&void 0!==t?t:500,withAnimation:null===(n=this.props.withMovingAfterDrag)||void 0===n||n,easing:null!==(i=this.props.afterDragMovingEasing)&&void 0!==i?i:"easeInOutQuad",calculationHelper:this.props.afterDragMovingPositionCalculationHelper,onMoving:this.props.onAfterDragMoving,onMovingEnd:this.props.onAfterDragMovingEnd},Object(w.omit)(this.props,["style","Component","id","slotId","withMovingAfterDrag","afterDragMovingDuration","afterDragMovingEasing","afterDragMovingPositionCalculationHelper","onAfterDragMoving","onAfterDragMovingEnd","onStartDrag","onMoveDrag","onFinishDrag","onIntersectionIn","onIntersectionOut"]))}},{key:"initReactions",value:function(){Object.values(this.reactions).forEach((function(e){return e.init()}))}},{key:"setProps",value:function(e){var t,n,i;this.props=e,this.props.state=null!==(t=this.props.state)&&void 0!==t?t:"default",this.props.disabled=null!==(n=this.props.disabled)&&void 0!==n&&n,null===(i=this.plateModel)||void 0===i||i.setDisabled(this.props.disabled)}},{key:"setElement",value:function(e){this.element=e,this.model.setElement(e)}},{key:"clear",value:function(){Object.values(this.reactions).forEach((function(e){return e.dispose()}))}}]),e}(),Ke=r.a.createContext(null),Xe=n(39),Qe=n(40),Ye=n.n(Qe).a.map((function(e){return e.trim()})).sort().filter((function(e){return"\u0436"!==e})),$e="easeInOutQuad",et=function(){function e(t){Object(c.a)(this,e),this.translate=void 0,this.anchor=void 0,this.withAnimation=!1,this.firstRender=!0,Object(u.n)(this,{},{autoBind:!0}),this.setAnchor(t.anchor),this.setTranslate(t.translate),this.setWithAnimation(t.withAnimation)}return Object(h.a)(e,[{key:"calculatedTransformStyle",get:function(){return{transform:"translate(".concat(this.translate.x,"px, ").concat(this.translate.y,"px)")}}},{key:"passFirstRender",value:function(){this.firstRender=!1}},{key:"setTranslate",value:function(e){this.translate=e}},{key:"setAnchor",value:function(e){this.withAnimation=!0,this.anchor=e}},{key:"setWithAnimation",value:function(e){this.withAnimation=e}}]),e}(),tt=function(e){var t=e.className,n=e.parent,i=e.containerStyle,o=e.children,a=r.a.useMemo((function(){var e=document.createElement("div");return e.style.width="100%",e.style.height="100%",e}),[]);return r.a.useLayoutEffect((function(){Object(w.entries)(i).forEach((function(e){var t=Object(W.a)(e,2),n=t[0],i=t[1];a.style[n]=i}))}),[i,a.style]),r.a.useLayoutEffect((function(){a.className=null!==t&&void 0!==t?t:""}),[t,a]),r.a.useLayoutEffect((function(){n.appendChild(a)}),[n,a]),r.a.useLayoutEffect((function(){return function(){return a.remove()}}),[a]),s.a.createPortal(o,a)},nt=["anchor","duration","Component","style","easing","bounded","translate","withAnimation","calculationHelper","reparentableContainerStyle","onMoving","onMovingEnd"],it=function(e){return e.currentTranslate},rt={x:0,y:0},ot=Object(a.a)(r.a.forwardRef((function(e,t){var n=e.anchor,i=e.duration,o=void 0===i?500:i,s=e.Component,a=e.style,c=e.easing,u=void 0===c?$e:c,d=e.bounded,h=void 0===d||d,f=e.translate,v=void 0===f?rt:f,p=e.withAnimation,b=void 0===p||p,m=e.calculationHelper,g=void 0===m?it:m,j=e.reparentableContainerStyle,y=e.onMoving,O=e.onMovingEnd,k=Object(M.a)(e,nt),_=r.a.useRef({onMoving:y,onMovingEnd:O});r.a.useEffect((function(){_.current={onMoving:y,onMovingEnd:O}}),[y,O]);var C=Object(l.d)((function(){return new et({anchor:n,translate:v,withAnimation:b})})),E=me(t),w=r.a.useRef(null),x=r.a.useMemo((function(){return Object(I.a)(Object(I.a)({},a),C.calculatedTransformStyle)}),[C.calculatedTransformStyle,a]);return r.a.useEffect((function(){if(!C.firstRender&&E.current&&h){var e=Fe(n,E.current);C.setAnchor(n),C.setTranslate({x:e.left,y:e.top})}}),[n,C,h]),r.a.useEffect((function(){return C.setWithAnimation(b)}),[C,b]),r.a.useEffect((function(){h||C.setTranslate(v)}),[h,v,C]),r.a.useEffect((function(){var e;h||(null===(e=w.current)||void 0===e||e.pause())}),[h]),r.a.useEffect((function(){return C.setWithAnimation(b)}),[C,b]),r.a.useEffect((function(){h||C.setTranslate(v)}),[h,v,C]),r.a.useEffect((function(){var e;h||(null===(e=w.current)||void 0===e||e.pause())}),[h]),r.a.useEffect((function(){if(h){var e=Object(I.a)({},C.translate),t=Object(I.a)({},C.translate),n={x:0,y:0};w.current&&w.current.pause(),C.withAnimation&&!C.firstRender?w.current=Object(Xe.a)(Object(I.a)(Object(I.a)({targets:t},n),{},{duration:o,easing:u,update:function(){var i,r;C.setTranslate(g({startTranslate:e,currentTranslate:t,finishTranslate:n})),null===(i=(r=_.current).onMoving)||void 0===i||i.call(r,t)},complete:function(){var e,t;null===(e=(t=_.current).onMovingEnd)||void 0===e||e.call(t,n)}})):C.setTranslate(n)}}),[C.anchor,h]),r.a.useEffect((function(){return function(){var e;return null===(e=w.current)||void 0===e?void 0:e.pause()}}),[]),r.a.useEffect((function(){return C.passFirstRender()}),[C]),Object(A.jsx)(tt,{parent:C.anchor,containerStyle:j,children:Object(A.jsx)(s,Object(I.a)(Object(I.a)({},k),{},{ref:E,style:x}))})}))),st=Object(a.a)(r.a.forwardRef((function(e,t){var n=function(){var e=r.a.useContext(Ke);if(!e)throw new Error("PlateStoreContext values was not provided");return e}().elementMoverProps,i=n.Component,o=n.anchor,s=n.translate,a=n.bounded,l=n.duration,c=n.withAnimation,u=n.easing,d=n.calculationHelper,h=n.onMoving,f=n.onMovingEnd,v=n.componentProps;return Object(A.jsx)(ot,Object(I.a)(Object(I.a)({},v),{},{ref:t,Component:i,anchor:o,translate:s,bounded:a,duration:l,withAnimation:c,easing:u,calculationHelper:d,onMoving:h,onMovingEnd:f}))}))),at=10,lt=10,ct=function(e){if(function(e){return["mousedown","mousemove","mouseup"].includes(e.type)}(e)){var t=e;return{x:t.pageX,y:t.pageY}}var n=e;return{x:n.changedTouches[0].pageX,y:n.changedTouches[0].pageY}},ut=function(){function e(t){Object(c.a)(this,e),this.callbacks={},this.element=void 0,this.elementCaptured=!1,this.startEvent=null,this.prevMoveEvent=null,this.moveEvent=null,this.type=null,Object(u.n)(this,{},{autoBind:!0}),this.element=t.element,this.callbacks=t,this.initListeners()}return Object(h.a)(e,[{key:"draggableData",get:function(){if(!this.startEvent)return null;var e=ct(this.startEvent),t=this.prevMoveEvent?ct(this.prevMoveEvent):e,n=this.moveEvent?ct(this.moveEvent):e;return{type:this.type,element:this.element,point:n,deltaPoint:{x:n.x-t.x,y:n.y-t.y},offsetPoint:{x:n.x-e.x,y:n.y-e.y}}}},{key:"deviceIsTouch",get:function(){return document.body.classList.contains("touch")}},{key:"initListeners",value:function(){e.addListener("mousedown",this.handleMouseDown),e.addListener("mousemove",this.handleMouseMove),e.addListener("mouseup",this.handleMouseUp),e.addListener("touchstart",this.handleTouchStart),e.addListener("touchmove",this.handleTouchMove),e.addListener("touchend",this.handleTouchEnd)}},{key:"isOffsetSmall",value:function(){if(!this.startEvent||!this.moveEvent)return!0;var e=ct(this.startEvent),t=ct(this.moveEvent),n=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return n<at&&i<lt}},{key:"setMoveEvent",value:function(e){this.prevMoveEvent=this.moveEvent,this.moveEvent=e}},{key:"clearSavedEvents",value:function(){this.startEvent=null,this.prevMoveEvent=null,this.moveEvent=null}},{key:"handleMouseDown",value:function(e){if(!this.deviceIsTouch&&e.target instanceof Node&&this.element.contains(e.target)){var t,n,i,r;if(null!==this.type)return this.type=null,this.elementCaptured=!1,null===(t=(n=this.callbacks).onFinishDrag)||void 0===t||t.call(n,e,this.draggableData),void this.clearSavedEvents();if(null===this.type)this.type="drag-and-drop",this.startEvent=e,this.elementCaptured=!0,null===(i=(r=this.callbacks).onStartDrag)||void 0===i||i.call(r,e,this.draggableData)}}},{key:"handleMouseMove",value:function(e){var t,n;this.deviceIsTouch||this.elementCaptured&&(this.setMoveEvent(e),null===(t=(n=this.callbacks).onMoveDrag)||void 0===t||t.call(n,e,this.draggableData))}},{key:"handleMouseUp",value:function(e){var t,n;this.deviceIsTouch||this.elementCaptured&&(this.isOffsetSmall()?this.type="click-and-click":(this.type=null,this.elementCaptured=!1,null===(t=(n=this.callbacks).onFinishDrag)||void 0===t||t.call(n,e,this.draggableData),this.clearSavedEvents()))}},{key:"handleTouchStart",value:function(e){var t,n;e.target instanceof Node&&this.element.contains(e.target)&&(this.startEvent=e,this.type="drag-and-drop",this.elementCaptured=!0,null===(t=(n=this.callbacks).onStartDrag)||void 0===t||t.call(n,e,this.draggableData))}},{key:"handleTouchMove",value:function(e){var t,n;this.elementCaptured&&(this.setMoveEvent(e),null===(t=(n=this.callbacks).onMoveDrag)||void 0===t||t.call(n,e,this.draggableData))}},{key:"handleTouchEnd",value:function(e){var t,n;this.elementCaptured&&(this.elementCaptured=!1,null===(t=(n=this.callbacks).onFinishDrag)||void 0===t||t.call(n,e,this.draggableData),this.type=null,this.clearSavedEvents())}},{key:"updateElement",value:function(e){this.element=e}},{key:"clear",value:function(){e.removeListener("mousedown",this.handleMouseDown),e.removeListener("mousemove",this.handleMouseMove),e.removeListener("mouseup",this.handleMouseUp),e.removeListener("touchstart",this.handleTouchStart),e.removeListener("touchmove",this.handleTouchMove),e.removeListener("touchend",this.handleTouchEnd)}}],[{key:"addListener",value:function(e,t){document.addEventListener(e,t)}},{key:"removeListener",value:function(e,t){document.removeEventListener(e,t)}}]),e}(),dt=function(){function e(t){Object(c.a)(this,e),this.props=void 0,this.element=null,this.eventManager=null,Object(u.n)(this,{},{autoBind:!0}),this.setProps(t.props)}return Object(h.a)(e,[{key:"draggableProps",get:function(){return Object(I.a)({},Object(w.omit)(this.props,["Component","onStartDrag","onMoveDrag","onFinishDrag"]))}},{key:"handleStartDrag",value:function(e,t){var n,i;null===(n=(i=this.props).onStartDrag)||void 0===n||n.call(i,e,t)}},{key:"handleMoveDrag",value:function(e,t){var n,i;null===(n=(i=this.props).onMoveDrag)||void 0===n||n.call(i,e,t)}},{key:"handleFinishDrag",value:function(e,t){var n,i;null===(n=(i=this.props).onFinishDrag)||void 0===n||n.call(i,e,t)}},{key:"setElement",value:function(e){this.element=e,this.eventManager?this.eventManager.updateElement(e):this.eventManager=new ut({element:e,onStartDrag:this.handleStartDrag,onMoveDrag:this.handleMoveDrag,onFinishDrag:this.handleFinishDrag})}},{key:"setProps",value:function(e){this.props=e}},{key:"clear",value:function(){var e;null===(e=this.eventManager)||void 0===e||e.clear()}}]),e}(),ht=Object(a.a)(r.a.forwardRef((function(e,t){var n=me(t),i=Object(l.d)((function(){return new dt({props:e,element:null})})),o=e.Component,s=r.a.useCallback((function(e){e&&(n.current=e,i.setElement(n.current))}),[i,n]);return r.a.useEffect((function(){return i.setProps(e)}),[i,e]),r.a.useEffect((function(){return function(){return i.clear()}}),[i]),Object(A.jsx)(o,Object(I.a)(Object(I.a)({},i.draggableProps),{},{ref:s}))}))),ft=Object(a.a)((function(e){var t=r.a.useRef(null),n=Le(),i=Object(l.d)((function(){return new Je({props:e,dragger:n,element:null})})),o=i.draggableProps,s=o.onStartDrag,a=o.onMoveDrag,c=o.onFinishDrag,u=i.elementMoverProps,d=u.Component,h=u.anchor,f=u.componentProps,v=i.model,p=r.a.useCallback((function(e){null!==e&&(i.setElement(e),t.current=e)}),[i]);return r.a.useEffect((function(){return i.setElement(t.current)}),[v,i]),r.a.useEffect((function(){return i.setProps(e)}),[i,e]),Object(A.jsx)(Ke.Provider,{value:i,children:h?Object(A.jsx)(ht,{ref:p,Component:st,onStartDrag:s,onMoveDrag:a,onFinishDrag:c}):Object(A.jsx)(d,Object(I.a)(Object(I.a)({},Object(w.omit)(f,"disabled","bounded","withAnimation","calculationHelper","onMoving","onMovingEnd","componentProps")),{},{ref:t}))})})),vt=n(14),pt=n(17),bt=n.n(pt),mt=n(21),gt=n(25),jt=n.n(gt),yt=function(){function e(){Object(c.a)(this,e),this.events=void 0,this.events=new jt.a}return Object(h.a)(e,[{key:"on",value:function(e,t){this.events.on(e,t)}},{key:"once",value:function(e,t){this.events.once(e,t)}},{key:"off",value:function(e,t){this.events.off(e,t)}},{key:"removeAllListeners",value:function(e){this.events.removeAllListeners(e)}},{key:"emit",value:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=this.events).emit.apply(t,[e].concat(i))}},{key:"setMaxListeners",value:function(e){this.events.setMaxListeners(e)}}]),e}(),Ot="mousedown",kt="mouseenter",_t="mouseup",Ct="intersectionIn",Et="intersectionOut",wt="startDrag",xt="finishDrag",St=ye,It=n(36),Mt=n.n(It),Dt=function(){function e(t){var n,i,r;Object(c.a)(this,e),this.duration=void 0,this.shown=void 0,this.shownAnimating=!1,this.onShowingEnd=void 0,this.deferred=null,this.events=void 0,Object(u.n)(this,{},{autoBind:!0}),this.events=new jt.a,this.shown=null===(n=null===t||void 0===t?void 0:t.shown)||void 0===n||n,this.duration=null!==(i=null===t||void 0===t?void 0:t.duration)&&void 0!==i?i:500,this.setShowingEndHandler(null!==(r=null===t||void 0===t?void 0:t.onShowingEnd)&&void 0!==r?r:null)}return Object(h.a)(e,[{key:"on",value:function(e,t){this.events.on(e,t)}},{key:"once",value:function(e,t){this.events.on(e,t)}},{key:"off",value:function(e,t){this.events.off(e,t)}},{key:"removeAllListeners",value:function(e){this.events.removeAllListeners(e)}},{key:"setShowingEndHandler",value:function(e){this.onShowingEnd=e}},{key:"startShownAnimating",value:function(){this.shownAnimating=!0}},{key:"finishShownAnimating",value:function(){var e,t;this.shownAnimating=!1,null===(e=this.deferred)||void 0===e||e.resolve(),this.deferred=null,null===(t=this.onShowingEnd)||void 0===t||t.call(this,this.shown),this.events.emit("showing-end",this.shown)}},{key:"startShowing",value:function(){var e;this.shown?null===(e=this.onShowingEnd)||void 0===e||e.call(this,this.shown):(this.shown=!0,this.startShownAnimating(),this.deferred=Mt.a.defer(),0===this.duration&&this.finishShownAnimating())}},{key:"startHiding",value:function(){var e;this.shown?(this.shown=!1,this.startShownAnimating(),this.deferred=Mt.a.defer(),0===this.duration&&this.finishShownAnimating()):null===(e=this.onShowingEnd)||void 0===e||e.call(this,this.shown)}},{key:"setShown",value:function(e){e?this.startShowing():this.startHiding()}},{key:"show",value:function(){var e=Object(mt.a)(bt.a.mark((function e(){var t;return bt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shown){e.next=2;break}return e.abrupt("return");case 2:return this.startShowing(),e.next=5,null===(t=this.deferred)||void 0===t?void 0:t.promise;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hide",value:function(){var e=Object(mt.a)(bt.a.mark((function e(){var t;return bt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.shown){e.next=2;break}return e.abrupt("return");case 2:return this.startHiding(),e.next=5,null===(t=this.deferred)||void 0===t?void 0:t.promise;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setDuration",value:function(e){this.duration=e}},{key:"showInstantly",value:function(){var e=this,t=this.duration;this.setDuration(0),this.show(),Promise.resolve().then((function(){return e.setDuration(t)}))}},{key:"hideInstantly",value:function(){var e=this,t=this.duration;this.setDuration(0),this.hide(),Promise.resolve().then((function(){return e.setDuration(t)}))}},{key:"waitShowing",value:function(){var e=Object(mt.a)(bt.a.mark((function e(){var t;return bt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.deferred)||void 0===t?void 0:t.promise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Lt=function(){function e(t){var n,i;Object(c.a)(this,e),this.fade=new Dt,this.eventEmitter=new yt,this._uid=Object(w.uniqueId)(),this._letter=void 0,this._color=void 0,this._hovered=!1,this._selected=!1,this._disabled=!1,this._dragListening=!1,this._element=null,this._slotId=void 0,this._intersectedSlotId=null,this._group=void 0,Object(u.n)(this,{},{autoBind:!0}),this._letter=t.letter,this._color=null!==(n=t.color)&&void 0!==n?n:St,this._slotId=t.slotId,this._group=null!==(i=t.group)&&void 0!==i?i:Object(w.uniqueId)()}return Object(h.a)(e,[{key:"uid",get:function(){return this._uid}},{key:"group",get:function(){return this._group}},{key:"letter",get:function(){return this._letter}},{key:"color",get:function(){return this._color}},{key:"element",get:function(){return this._element}},{key:"hovered",get:function(){return this._hovered}},{key:"slotId",get:function(){return this._slotId}},{key:"selected",get:function(){return this._selected}},{key:"disabled",get:function(){return this._disabled}},{key:"intersectedSlotId",get:function(){return this._intersectedSlotId}},{key:"dragListening",get:function(){return this._dragListening}},{key:"on",value:function(e,t){this.eventEmitter.on(e,t)}},{key:"once",value:function(e,t){this.eventEmitter.on(e,t)}},{key:"off",value:function(e,t){this.eventEmitter.off(e,t)}},{key:"removeAllListeners",value:function(e){this.eventEmitter.removeAllListeners(e)}},{key:"loadElement",value:function(e){this._element=e}},{key:"setHovered",value:function(e){this._hovered=e}},{key:"setSlotId",value:function(e){this._slotId=e}},{key:"setSelected",value:function(e){this._selected=e}},{key:"setDisabled",value:function(e){this._disabled=e}},{key:"setGroup",value:function(e){this._group=e}},{key:"setIntersectedSlotId",value:function(e){this._intersectedSlotId=e}},{key:"setDragListening",value:function(e){this._dragListening=e}},{key:"handleMouseDown",value:function(){this.eventEmitter.emit(Ot)}},{key:"handleMouseEnter",value:function(){this.eventEmitter.emit(kt)}},{key:"handleMouseUp",value:function(){this.eventEmitter.emit(_t)}},{key:"handleIntersectionIn",value:function(e){this.eventEmitter.emit(Ct,e)}},{key:"handleIntersectionOut",value:function(e){this.eventEmitter.emit(Et,e)}},{key:"handleStartDrag",value:function(e,t){this.eventEmitter.emit(wt,e,t)}},{key:"handleFinishDrag",value:function(e,t){this.eventEmitter.emit(xt,e,t)}}]),e}(),At=function(){function e(t){Object(c.a)(this,e),this._uid=Object(w.uniqueId)(),this._point=void 0,this._hovered=!1,this._element=null,this._cubeId=null,Object(u.n)(this,{},{autoBind:!0}),this._point=t.point}return Object(h.a)(e,[{key:"uid",get:function(){return this._uid}},{key:"element",get:function(){return this._element}},{key:"hovered",get:function(){return this._hovered}},{key:"point",get:function(){return this._point}},{key:"cubeId",get:function(){return this._cubeId}},{key:"loadElement",value:function(e){this._element=e}},{key:"setHovered",value:function(e){this._hovered=e}},{key:"setCubeId",value:function(e){this._cubeId=e}}]),e}(),Ft="mouseup",Pt=function(){function e(){Object(c.a)(this,e),this.eventEmitter=new yt,this._cells=Object(w.range)(100).map((function(e){var t=Math.sqrt(100);return new At({point:{x:e%t,y:Math.floor(e/t)}})})),Object(u.n)(this,{},{autoBind:!0})}return Object(h.a)(e,[{key:"cells",get:function(){return this._cells}},{key:"on",value:function(e,t){this.eventEmitter.on(e,t)}},{key:"once",value:function(e,t){this.eventEmitter.on(e,t)}},{key:"off",value:function(e,t){this.eventEmitter.off(e,t)}},{key:"removeAllListeners",value:function(e){this.eventEmitter.removeAllListeners(e)}},{key:"handleMouseUp",value:function(){this.eventEmitter.emit(Ft)}}]),e}(),Bt="selectedCubesUpdated",Tt="selectionEnd",Nt=function(){function e(){Object(c.a)(this,e),this.eventEmitter=new yt,this.field=null,this.cubes=[],this._selectedCubes=[]}return Object(h.a)(e,[{key:"selectedCubes",get:function(){return this._selectedCubes}},{key:"on",value:function(e,t){this.eventEmitter.on(e,t)}},{key:"once",value:function(e,t){this.eventEmitter.on(e,t)}},{key:"off",value:function(e,t){this.eventEmitter.off(e,t)}},{key:"removeAllListeners",value:function(e){this.eventEmitter.removeAllListeners(e)}},{key:"startListening",value:function(e){this.stopListening(),this.cubes=e.cubes,this.field=e.field,this.startCubeMouseDownListeners()}},{key:"stopListening",value:function(){this.stopCubeMouseDownListeners(),this.stopCubeMouseEnterListeners(),this.stopFieldMouseUpListener()}},{key:"startCubeMouseDownListeners",value:function(){var e=this;this.cubes.forEach((function(t){t.on(Ot,(function(){e.setSelectedCubes([t]),e.stopCubeMouseDownListeners(),e.startCubeMouseEnterListeners(),e.startFieldMouseUpListener()}))}))}},{key:"stopCubeMouseDownListeners",value:function(){this.cubes.forEach((function(e){return e.removeAllListeners(Ot)}))}},{key:"startFieldMouseUpListener",value:function(){var e=this;this.field&&(this.cubes.forEach((function(t){t.on(_t,(function(){e.stopCubeMouseEnterListeners(),e.stopFieldMouseUpListener(),e.startCubeMouseDownListeners(),e.eventEmitter.emit(Tt,{selectedCubes:e.selectedCubes})}))})),this.field.on(Ft,(function(){e.stopCubeMouseEnterListeners(),e.stopFieldMouseUpListener(),e.startCubeMouseDownListeners(),e.eventEmitter.emit(Tt,{selectedCubes:e.selectedCubes})})))}},{key:"stopFieldMouseUpListener",value:function(){this.field&&(this.cubes.forEach((function(e){return e.removeAllListeners(_t)})),this.field.removeAllListeners(Ft))}},{key:"startCubeMouseEnterListeners",value:function(){var e=this;this.cubes.forEach((function(t){t.on(kt,(function(){var n=e.field.cells.find((function(e){return e.uid===t.slotId})),i=e.selectedCubes.slice(-2)[0],r=Object(w.last)(e.selectedCubes),o=e.field.cells.find((function(e){return e.uid===(null===i||void 0===i?void 0:i.slotId)})),s=e.field.cells.find((function(e){return e.uid===r.slotId})),a=e.getNeighborCells(s).find((function(e){return e===n})),l=Object(w.compact)(e.selectedCubes.map((function(t){return e.field.cells.find((function(e){return e.cubeId===t.uid}))})));if(a)if(a===o)e.setSelectedCubes(e.selectedCubes.filter((function(e){return e!==r})));else if(l.includes(a)){if(l.includes(a)){var c=l.indexOf(a);e.setSelectedCubes(e.selectedCubes.slice(0,c+1))}}else e.setSelectedCubes([].concat(Object(vt.a)(e.selectedCubes),[t]))}))}))}},{key:"stopCubeMouseEnterListeners",value:function(){this.cubes.forEach((function(e){e.removeAllListeners(kt)}))}},{key:"getNeighborCells",value:function(e){return this.field.cells.filter((function(t){return t.point.x===e.point.x-1&&t.point.y===e.point.y||t.point.x===e.point.x&&t.point.y===e.point.y-1||t.point.x===e.point.x+1&&t.point.y===e.point.y||t.point.x===e.point.x&&t.point.y===e.point.y+1}))}},{key:"setSelectedCubes",value:function(e){this._selectedCubes=e,this.eventEmitter.emit(Bt,{selectedCubes:this.selectedCubes})}}]),e}(),Ht="tick",Rt=function(){function e(){Object(c.a)(this,e),this.eventEmitter=new yt,this.intervalId=null}return Object(h.a)(e,[{key:"on",value:function(e,t){this.eventEmitter.on(e,t)}},{key:"once",value:function(e,t){this.eventEmitter.on(e,t)}},{key:"off",value:function(e,t){this.eventEmitter.off(e,t)}},{key:"removeAllListeners",value:function(e){this.eventEmitter.removeAllListeners(e)}},{key:"start",value:function(e){var t=this;this.stop();var n=0;this.intervalId=window.setInterval((function(){n+=e,t.eventEmitter.emit(Ht,{value:n})}),e)}},{key:"stop",value:function(){this.intervalId&&window.clearInterval(this.intervalId)}}]),e}(),Ut=function(){function e(){var t=this;Object(c.a)(this,e),this.progressController=new v,this.time=0,this._tapeSlots=Object(w.range)(20).map((function(){return{uid:Object(w.uniqueId)()}})),this._cubes=Object(w.flatten)([this.generateFigureCubes(0),this.generateFigureCubes(1),this.generateFigureCubes(2),this.generateFigureCubes(3)]),this._field=new Pt,this.selectorHelper=new Nt,this.timer=new Rt,Object(u.n)(this,{},{autoBind:!0}),this._cubes.forEach((function(e){return t.startDragListeners(e)})),this.selectorHelper.on(Bt,(function(e){var n=e.selectedCubes;t._cubes.forEach((function(e){return e.setSelected(!1)})),n.forEach((function(e){return e.setSelected(!0)})),t.timer.stop(),t.setTime(0)})),this.selectorHelper.on(Tt,(function(e){var n=e.selectedCubes,i=n.map((function(e){return e.letter})).join("").toLowerCase(),r=Ye.find((function(e){return e===i}));t.timer.start(1e3),r?(t.progressController.collectWord(i),Promise.all(n.map((function(e){return e.fade.hide()}))).then((function(){Object(w.compact)(n.map((function(e){return t.field.cells.find((function(t){return t.uid===e.slotId}))}))).forEach((function(e){return e.setCubeId(null)})),t.setCubes(Object(w.difference)(t._cubes,n))}))):n.forEach((function(e){return e.setSelected(!1)}))})),this.timer.on(Ht,(function(e){var n=e.value;if(t.setTime(n),2e4===n){t.timer.stop(),t.setTime(0);var i=t._cubes.filter((function(e){return e.dragListening}));Promise.all(i.map(function(){var e=Object(mt.a)(bt.a.mark((function e(t){return bt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setDragListening(!1),e.next=3,t.fade.hide();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(){var e=[].concat(Object(vt.a)(t.generateFigureCubes(0)),Object(vt.a)(t.generateFigureCubes(1)),Object(vt.a)(t.generateFigureCubes(2)),Object(vt.a)(t.generateFigureCubes(3)));e.forEach((function(e){return e.fade.hideInstantly()})),t.setCubes(Object(w.difference)(t._cubes,i)),t.setCubes([].concat(Object(vt.a)(t._cubes),Object(vt.a)(e))),Promise.all(e.map((function(e){return e.fade.show().then((function(){e.setDragListening(!0),t.startDragListeners(e)}))}))).then((function(){t.timer.start(1e3)}))}))}})),this.timer.start(1e3),console.log(this)}return Object(h.a)(e,[{key:"tapeSlots",get:function(){return this._tapeSlots}},{key:"field",get:function(){return this._field}},{key:"cubes",get:function(){return this._cubes}},{key:"getTapeSlotChunkIndexByTapeSlotUid",value:function(e){return Object(w.chunk)(this.tapeSlots,5).findIndex((function(t){return t.find((function(t){return t.uid===e}))}))}},{key:"generateFigureCubes",value:function(e){var t=Object(w.sample)([1,2,3]),n=1===t?1:2,i=Object(w.range)(n).map((function(){return Object(w.sample)(f.rus)})),r=Object(w.chunk)(this.tapeSlots,5)[e],o=Object(w.uniqueId)(),s=[r[0]];return 2===t&&(s=[r[1],r[2]]),3===t&&(s=[r[3],r[4]]),i.map((function(e,t){var n=ge;return 2===e.score&&(n=je),3===e.score&&(n=ye),4===e.score&&(n=Oe),5===e.score&&(n=ke),8===e.score&&(n=_e),10===e.score&&(n=Ce),new Lt({letter:e.letter.toUpperCase(),slotId:s[t].uid,group:o,color:n})}))}},{key:"startDragListeners",value:function(e){var t=this,n=this._cubes.filter((function(t){return t.group===e.group}));e.setDragListening(!0),e.on(wt,(function(){t.timer.stop(),t.setTime(0)})),e.on(Ct,(function(i){e.setIntersectedSlotId(i.slotId);var r=Object(w.uniq)(Object(w.compact)(n.map((function(e){return t.field.cells.find((function(t){return t.uid===e.intersectedSlotId&&null===t.cubeId}))}))));r.length===n.length?r.forEach((function(e){return e.setHovered(!0)})):r.forEach((function(e){return e.setHovered(!1)}))})),e.on(Et,(function(){n.forEach((function(e){var n=t.field.cells.find((function(t){return t.uid===e.intersectedSlotId}));null===n||void 0===n||n.setHovered(!1)})),e.setIntersectedSlotId(null)})),e.on(xt,(function(){t.timer.start(1e3);var i=Object(w.uniq)(Object(w.compact)(n.map((function(e){return t.field.cells.find((function(t){return t.uid===e.intersectedSlotId}))})))),r=i.every((function(e){return null===e.cubeId}));if(i.length===n.length&&r){var o=t.getTapeSlotChunkIndexByTapeSlotUid(e.slotId);n.forEach((function(e,n){var r,o;null===(r=i[n])||void 0===r||r.setCubeId(e.uid),null===(o=i[n])||void 0===o||o.setHovered(!1),e.setSlotId(e.intersectedSlotId),e.setIntersectedSlotId(null),t.stopDragListeners(e)})),t.selectorHelper.startListening({cubes:t._cubes.filter((function(e){return!e.dragListening})),field:t._field});var s=t.generateFigureCubes(o);s.forEach((function(e){return e.fade.hideInstantly()})),t._cubes=[].concat(Object(vt.a)(t._cubes),Object(vt.a)(s)),s.forEach((function(e){return t.startDragListeners(e)})),Promise.resolve().then((function(){return s.forEach((function(e){return e.fade.show()}))}))}else n.forEach((function(e,t){var n;null===(n=i[t])||void 0===n||n.setCubeId(null),e.setIntersectedSlotId(null)}))}))}},{key:"stopDragListeners",value:function(e){e.setDragListening(!1),e.removeAllListeners(Ct),e.removeAllListeners(Et),e.removeAllListeners(xt)}},{key:"setCubes",value:function(e){this._cubes=e}},{key:"setTime",value:function(e){this.time=e}}]),e}(),Gt=n(59),Zt=["className","style","shown","duration","delay","easing","withUnmount","children","onShowingEnd"],Vt=r.a.forwardRef((function(e,t){var n=e.className,i=e.style,o=e.shown,s=void 0===o||o,a=e.duration,l=void 0===a?500:a,c=e.delay,u=void 0===c?0:c,d=e.easing,h=void 0===d?"ease-in":d,f=e.withUnmount,v=void 0===f||f,p=e.children,b=e.onShowingEnd,m=Object(M.a)(e,Zt),g=me(t),j=r.a.useMemo((function(){return{entered:{opacity:1},entering:{transition:"opacity ".concat(l,"ms ").concat(u,"ms ").concat(h),opacity:1},exiting:{transition:"opacity ".concat(l,"ms ").concat(u,"ms ").concat(h),opacity:0},exited:{opacity:0}}}),[u,l,h]),y=r.a.useCallback((function(){g.current&&g.current.offsetHeight}),[]),O=r.a.useCallback((function(){null===b||void 0===b||b(s)}),[b,s]);return Object(A.jsx)(Gt.a,{nodeRef:g,in:s,timeout:l+u,mountOnEnter:v,unmountOnExit:v,onEnter:y,onEntered:O,onExited:O,children:function(e){return Object(A.jsx)(K,Object(I.a)(Object(I.a)({},m),{},{ref:g,style:"unmounted"!==e?Object(I.a)(Object(I.a)({},i),j[e]):Object(I.a)({},i),className:n,children:p}))}})})),Wt=Object(a.a)((function(){var e=Object(l.d)((function(){return new Ut})),t=r.a.useMemo((function(){return Object(w.chunk)(e.tapeSlots,5)}),[e.tapeSlots]),n=(2e4-e.time)/1e3;return Object(A.jsx)(Ne,{children:Object(A.jsxs)("div",{className:V.a.main,children:[Object(A.jsx)("div",{className:V.a.progressContainer,children:Object(A.jsx)("div",{className:V.a.scoreCounterContainer,children:Object(A.jsx)(ae,{scores:e.progressController.scores})})}),Object(A.jsx)("div",{className:V.a.backButtonContainer,children:Object(A.jsx)(be,{})}),Object(A.jsx)("div",{className:V.a.fieldContainer,children:Object(A.jsx)(P,{onMouseUp:e.field.handleMouseUp,children:e.field.cells.map((function(e){return Object(A.jsx)(We,{id:e.uid,Component:H,isHovered:e.hovered},e.uid)}))})}),Object(A.jsxs)(G,{children:[t.map((function(e,t){return Object(A.jsx)("div",{className:V.a.tapeSlotsWrap,children:e.map((function(e,t){return Object(A.jsx)(We,{id:e.uid,Component:Me,className:S()(V.a.tapeSlot,V.a["tapeSlot_position_".concat(t+1)])},e.uid)}))},t)})),Object(A.jsx)(Vt,{shown:n<6,className:V.a.timer,children:n}),e.cubes.map((function(e){return Object(A.jsx)(ft,{id:e.uid,disabled:!e.dragListening,slotId:e.slotId,group:e.group,Component:K,afterDragMovingDuration:200,componentProps:{className:V.a.cube,children:Object(A.jsx)(Vt,{duration:200,shown:e.fade.shown,onShowingEnd:e.fade.finishShownAnimating,children:Object(A.jsx)(Ie,{color:e.color,selected:e.selected,children:e.letter,onMouseDown:e.handleMouseDown,onMouseEnter:e.handleMouseEnter,onMouseUp:e.handleMouseUp})})},onIntersectionIn:e.handleIntersectionIn,onIntersectionOut:e.handleIntersectionOut,onStartDrag:e.handleStartDrag,onFinishDrag:e.handleFinishDrag},e.uid)}))]})]})})})),qt=n(23),zt=n.n(qt),Jt=n(6),Kt=Object(a.a)((function(){var e=function(){var e=Object(i.useContext)(b);if(null===e)throw new Error("Hook must be called inside AppStore.Provider");return e}().handleGameStartClick,t=Object(Jt.g)(),n=Object(i.useCallback)((function(){e(),t("game")}),[e,t]);return Object(A.jsxs)("div",{className:zt.a.main,children:[Object(A.jsx)("div",{className:zt.a.header,children:Object(A.jsx)("h1",{children:"StartPage"})}),Object(A.jsx)("div",{className:zt.a.content,children:Object(A.jsx)("div",{className:zt.a.playButton,onClick:n,children:"Start game"})})]})})),Xt=(n(54),n(55),n(30)),Qt=n(37),Yt=n.n(Qt);function $t(e){var t=e.children;return Object(A.jsx)("div",{className:Yt.a.main,children:Object(A.jsx)("div",{className:Yt.a.content,children:t})})}var en=b.Provider,tn=Object(a.a)((function(){var e=Object(l.d)((function(){return new p}));return Object(A.jsx)(en,{value:e,children:Object(A.jsx)(Xt.a,{basename:"/tetris-words",children:Object(A.jsx)($t,{children:Object(A.jsxs)(Jt.d,{children:[Object(A.jsx)(Jt.b,{path:"/",element:Object(A.jsx)(Kt,{})}),e.isVisibleGamePage&&Object(A.jsx)(Jt.b,{path:"/game",element:Object(A.jsx)(Wt,{})}),Object(A.jsx)(Jt.b,{path:"/game",element:Object(A.jsx)(Jt.a,{to:"/"})})]})})})})})),nn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,60)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),i(e),r(e),o(e),s(e)}))};s.a.render(Object(A.jsx)(tn,{}),document.getElementById("root")),nn()}},[[56,1,2]]]);
//# sourceMappingURL=main.8d1e3db7.chunk.js.map